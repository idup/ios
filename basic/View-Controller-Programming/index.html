<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>控制器 | iOS应用开发</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">控制器</h1><a id="logo" href="/.">iOS应用开发</a><p class="description">学习iOS App开发</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">控制器</h1><div class="post-meta">Jun 1, 2015<span> | </span><span class="category"><a href="/categories/IOS基础/">IOS基础</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>视图控制器是应用的核心，主要负责：</p>
<ul>
<li>视图管理</li>
<li>交互处理</li>
<li>数据传送</li>
<li>界面切换</li>
</ul>
<h3 id="视图管理"><a href="#视图管理" class="headerlink" title="视图管理"></a>视图管理</h3><p>控制器最重要的角色就是负责视图（层次）的管理。每个控制器管理一个视图（及其子视图），当你希望把某个视图显示出来时，应该将此视图对应的控制器作为应用窗口的根控制器（rootViewController），该视图控制器会自动将视图添加到窗口中并显示在屏幕上，但永远不要尝试通过将视图赋予窗口对象的方法去显示其内容。视图控制器会在必要的时候加载并视图对象并显示其内容，同样，它会在合适的条件下自动释放视图（因此，视图控制器在应用中还起到管理资源的核心作用）</p>
<img src="/images/controller_load_view.png" width="500" title="视图加载">
<p>这一过程可使用编程方式完成。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObjects]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">	<span class="keyword">self</span>.window = <span class="type">UIWindow</span>(frame:<span class="type">UIScreen</span>.mainScreen().bounds)</span><br><span class="line">	<span class="keyword">self</span>.window!.rootViewController = <span class="type">ViewController</span>()</span><br><span class="line">	<span class="keyword">self</span>.window!.makeKeyAndVisible()</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>每个视图控制器有（且仅有）一个根视图对象引用，可通过其访问到这个视图对象的所有子视图对象。一般使用<a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/Devpedia-CocoaApp/Outlet.html" target="_blank" rel="external">Outlet</a>保存对视图对象的引用。我们可以在Interface Builder中创建Outlet</p>
<img src="/images/ib_outlet.png" title="使用IB创建Outlet">
<h3 id="交互处理"><a href="#交互处理" class="headerlink" title="交互处理"></a>交互处理</h3><p>除了管理视图加载，控制器还负责处理视图中产生的事件。当视图中某个按钮被按动，视图对象会获取该事件并报送给某个相关联的委托对象（delegte）或目标对象（target），一般而言，这个对象就是某个视图控制器对象。视图本身并不知晓这个事件将会引发的结果，按钮按动的含义和相应的反应是调用该视图控制器的某个方法（IBAction）。在获得这个事件发生的通知后，控制器可以执行更新数据或改变视图属性等操作，甚至将另一个视图控制器对应的视图内容展示在屏幕上。</p>
<img src="/images/ib_outlet.png" title="使用IB关联事件到IBAction">
<h3 id="数据传送"><a href="#数据传送" class="headerlink" title="数据传送"></a>数据传送</h3><p>视图控制器一般还需管理应用数据到视图的传递过程。这一过程一般为</p>
<ol>
<li>交互事件触发控制器方法调用</li>
<li>方法执行过程中从数据对象获得数据</li>
<li>再通过视图对象引用（Outlet）操纵视图内容</li>
</ol>
<img src="/images/controller_data_transfer.png" width="300" title="数据传送">
<h3 id="多控制器（界面）设计"><a href="#多控制器（界面）设计" class="headerlink" title="多控制器（界面）设计"></a>多控制器（界面）设计</h3><p>iOS设备是移动设备，屏幕空间非常有限（哪怕是iPad pro），应用一般会有比较丰富的信息需要显示，但屏幕不能一次性显示所有内容，因此在用户与应用交互开始时应用仅会显示部分内容，并在以后过程中不断显示或隐藏其他内容，在此过程中视图控制器提供设施实现这一内容显示／隐藏的协同过程。通过不同控制器和对应的视图对应用进行分割，整个应用的用户界面被以较小的单位进行管理。如下图所示，每个视图由一个控制器管理，视图控制器相互通信实现这些分隔视图的切换过程，每个视图控制器操作应用的部分数据。</p>
<img src="/images/controller_multiple_views.png" title="分割的界面">
<h3 id="控制器分类"><a href="#控制器分类" class="headerlink" title="控制器分类"></a>控制器分类</h3><p>控制器可分为两类：内容视图控制器（Content View Controller）和容器视图控制器（Container View Controller）。</p>
<h4 id="内容视图控制器"><a href="#内容视图控制器" class="headerlink" title="内容视图控制器"></a>内容视图控制器</h4><p>内容视图控制器负责显示可视内容，包括将数据展示给用户，从用户处收集数据和执行特定操作等。例如下图所示的表视图控制器</p>
<img src="/images/controller_tableviewcontroller.png" width="300" title="表视图控制器">
<h4 id="容器视图控制器"><a href="#容器视图控制器" class="headerlink" title="容器视图控制器"></a>容器视图控制器</h4><p>容器视图控制器负责组织内容控制器，它包含其他视图控制器所管理的内容，被管理的视图控制器被显式地指定为容器视图控制器的子控制器。容器控制器可嵌套：它可作为其他容器控制器的子控制器，也可作为其他控制器的父控制器，通过这种形式控制器可形成层次结构（但跟视图层次不对应）。例如下图所示导航控制器</p>
<img src="/images/controller_navigationcontroller.png" width="400" title="导航控制器">
<p>以及iPad应用中常见的分栏视图控制器，如下图。</p>
<img src="/images/controller_splitviewcontroller.png" width="300" title="分栏视图控制器">
<h3 id="控制器内容（视图）显示"><a href="#控制器内容（视图）显示" class="headerlink" title="控制器内容（视图）显示"></a>控制器内容（视图）显示</h3><p>有多种方式可以通过控制器显示其相应的视图</p>
<ul>
<li>将某个控制器作为窗口对象的根视图控制器（上节已介绍）</li>
<li>将视图控制器作为加入一个容器控制器</li>
<li>让另一个控制器将其呈现（present）出来</li>
</ul>
<h4 id="作为根视图控制器"><a href="#作为根视图控制器" class="headerlink" title="作为根视图控制器"></a>作为根视图控制器</h4><img src="/images/controller_rootviewcontroller.png" width="300" title="作为根视图控制器">
<h4 id="使用容器控制器为根视图控制器"><a href="#使用容器控制器为根视图控制器" class="headerlink" title="使用容器控制器为根视图控制器"></a>使用容器控制器为根视图控制器</h4><img src="/images/controller_container.png" width="400" title="使用容器控制器为根视图控制器">
<h4 id="由另一个控制器将其呈现（present）"><a href="#由另一个控制器将其呈现（present）" class="headerlink" title="由另一个控制器将其呈现（present）"></a>由另一个控制器将其呈现（present）</h4><img src="/images/controller_present.png" width="500" title="由另一个控制器将其呈现">
<h4 id="更复杂的情况"><a href="#更复杂的情况" class="headerlink" title="更复杂的情况"></a>更复杂的情况</h4><img src="/images/controller_complex.png" width="500" title="复杂情况">
<h4 id="用StoryBoard定义"><a href="#用StoryBoard定义" class="headerlink" title="用StoryBoard定义"></a>用StoryBoard定义</h4><p>StoryBoard中一个场景（scene）代表在屏幕上显示的由一个控制器管理的内容区域，即一个视图控制器即其所管理的视图层次。可在同一个Storyboard中的两个场景间建立一个关系，如下图所示。</p>
<img src="/images/controller_scenes.png" title="场景关系">
<p>其中的关系包括</p>
<ul>
<li>包容关系（Containment）：两个场景的父子关系，前者一般对应一个容器控制器</li>
<li>延续关系（Segue）：从一个场景到另一个场景的转换（迁移），包括以下类型<ul>
<li>Push segue：将目标视图控制器压入导航控制器所管理的控制器栈中(如下图所示)</li>
<li>Modal segue: 将目标视图控制器呈现出来</li>
<li>Popover segue: 将目标视图控制器在一个弹出窗口（popover）中显示出来</li>
<li>Custom segue: 允许你自行设计所需的展示目标视图控制器的切换过程</li>
</ul>
</li>
</ul>
<img src="/images/controller_segue.png" width="300" title="Push Segue">
<p>注：本部分内容主要参考文献为<a href="https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html" target="_blank" rel="external">View Controller Programming Guide for iOS</a>。请对照<a href="https://developer.apple.com/library/ios/referencelibrary/GettingStarted/DevelopiOSAppsSwift/Lesson3.html" target="_blank" rel="external">Start Developing iOS Apps (Swift) - Connect the UI to Code</a> 和<a href="https://developer.apple.com/library/ios/referencelibrary/GettingStarted/DevelopiOSAppsSwift/Lesson4.html" target="_blank" rel="external">Start Developing iOS Apps (Swift) - Work with View Controllers</a>进行实践。</p>
</div><a data-url="http://ios.idup.club/basic/View-Controller-Programming/" data-id="cili4cwh1000tlrcgm0gvz5rm" class="article-share-link">分享到</a><div class="tags"></div><div class="post-nav"><a href="/basic/View-Programming/" class="pre">视图</a><a href="/basic/Advanced-Views-and-View-Controllers/" class="next">高级视图和控制器</a></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://ios.idup.club"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/IOS基础/">IOS基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IOS应用开发/">IOS应用开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Swift基础/">Swift基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/xcode概述/">xcode概述</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/应用示例/">应用示例</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/swift/Swift-Tour/">Swift 简易教程</a></li><li class="post-list-item"><a class="post-list-link" href="/swift/About-Swift/">关于Swift</a></li><li class="post-list-item"><a class="post-list-link" href="/swift/About-This-Site/">关于本站内容</a></li><li class="post-list-item"><a class="post-list-link" href="/demo/Location/">Location</a></li><li class="post-list-item"><a class="post-list-link" href="/demo/Camera/">Camera</a></li><li class="post-list-item"><a class="post-list-link" href="/demo/Bouncer/">Bouncer</a></li><li class="post-list-item"><a class="post-list-link" href="/demo/Dropit/">Dropit</a></li><li class="post-list-item"><a class="post-list-link" href="/demo/Cassini/">Cassini</a></li><li class="post-list-item"><a class="post-list-link" href="/app/1-Jump-Right-in/">一. 创建工程</a></li><li class="post-list-item"><a class="post-list-link" href="/app/2-Build-a-basic-UI/">二. 创建基本用户界面</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">iOS应用开发.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/share.js?v=0.0.0"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>