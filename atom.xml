<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>iOS应用开发</title>
  <subtitle>学习iOS App开发</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ios.idup.club/"/>
  <updated>2016-03-07T15:02:43.632Z</updated>
  <id>http://ios.idup.club/</id>
  
  <author>
    <name>iDUP Club</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Swift 简易教程</title>
    <link href="http://ios.idup.club/swift/Swift-Tour/"/>
    <id>http://ios.idup.club/swift/Swift-Tour/</id>
    <published>2016-02-09T05:04:23.000Z</published>
    <updated>2016-03-07T15:02:43.632Z</updated>
    
    <content type="html">&lt;p&gt;通常来说，编程语言教程中的第一个程序应该在屏幕上打印“Hello, world”。在 Swift 中，可以用一行代码实现：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Hello, world!&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果你写过 C 或者 Objective-C 代码，那你应该很熟悉这种形式——在 Swift 中，这行代码就是一个完整的程序。你不需要为了输入输出或者字符串处理导入一个单独的库。全局作用域中的代码会被自动当做程序的入口点，所以你也不需要main()函数。你同样不需要在每个语句结尾写上分号。&lt;/p&gt;
&lt;p&gt;这个教程会通过一系列编程例子来让你对 Swift 有初步了解，如果你有什么不理解的地方也不用担心——任何本章介绍的内容都会在后面的章节中详细讲解。&lt;/p&gt;
&lt;p&gt;注意： 为了获得最好的体验，在 Xcode 当中使用代码预览功能。代码预览功能可以让你编辑代码并实时看到运行结果。 &lt;a href=&quot;https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/Swift_Programming_Language/GuidedTour.playground.zip&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载Playground&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;注：本篇内容来自&lt;a href=&quot;http://wiki.jikexueyuan.com/project/swift/chapter1/02_a_swift_tour.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://wiki.jikexueyuan.com/project/swift/chapter1/02_a_swift_tour.html&lt;/a&gt;，其对应英文原文为&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/GuidedTour.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/GuidedTour.html&lt;/a&gt; 。&lt;/p&gt;
&lt;h3 id=&quot;简单值（Simple-Values）&quot;&gt;&lt;a href=&quot;#简单值（Simple-Values）&quot; class=&quot;headerlink&quot; title=&quot;简单值（Simple Values）&quot;&gt;&lt;/a&gt;简单值（Simple Values）&lt;/h3&gt;&lt;p&gt;使用&lt;code&gt;let&lt;/code&gt;来声明常量，使用&lt;code&gt;var&lt;/code&gt;来声明变量。一个常量的值，在编译的时候，并不需要有明确的值，但是你只能为它赋值一次。也就是说你可以用常量来表示这样一个值：你只需要决定一次，但是需要使用很多次。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; myVariable = &lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;myVariable = &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; myConstant = &lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;常量或者变量的类型必须和你赋给它们的值一样。然而，你不用明确地声明类型，声明的同时赋值的话，编译器会自动推断类型。在上面的例子中，编译器推断出&lt;code&gt;myVariable&lt;/code&gt;是一个整数（integer）因为它的初始值是整数。&lt;/p&gt;
&lt;p&gt;如果初始值没有提供足够的信息（或者没有初始值），那你需要在变量后面声明类型，用冒号分割。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; implicitInteger = &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; implicitDouble = &lt;span class=&quot;number&quot;&gt;70.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; explicitDouble: &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;70&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 创建一个常量，显式指定类型为Float并指定初始值为4。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;值永远不会被隐式转换为其他类型。如果你需要把一个值转换成其他类型，请显式转换。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; label = &lt;span class=&quot;string&quot;&gt;&quot;The width is&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; width = &lt;span class=&quot;number&quot;&gt;94&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; widthLabel = label + &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;(width)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 删除最后一行中的&lt;code&gt;String&lt;/code&gt;，错误提示是什么？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;有一种更简单的把值转换成字符串的方法：把值写到括号中，并且在括号之前写一个反斜杠。例如：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; apples = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; oranges = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; appleSummary = &lt;span class=&quot;string&quot;&gt;&quot;I have &lt;span class=&quot;subst&quot;&gt;\(apples)&lt;/span&gt; apples.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; fruitSummary = &lt;span class=&quot;string&quot;&gt;&quot;I have &lt;span class=&quot;subst&quot;&gt;\(apples + oranges)&lt;/span&gt; pieces of fruit.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 使用&lt;code&gt;\()&lt;/code&gt;来把一个浮点计算转换成字符串，并加上某人的名字，和他打个招呼。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;使用方括号&lt;code&gt;[]&lt;/code&gt;来创建数组和字典，并使用下标或者键（key）来访问元素。最后一个元素后面允许有个逗号。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; shoppingList = [&lt;span class=&quot;string&quot;&gt;&quot;catfish&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;water&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;tulips&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;blue paint&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;shoppingList[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&quot;bottle of water&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; occupations = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;Malcolm&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Captain&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;Kaylee&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Mechanic&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;occupations[&lt;span class=&quot;string&quot;&gt;&quot;Jayne&quot;&lt;/span&gt;] = &lt;span class=&quot;string&quot;&gt;&quot;Public Relations&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;要创建一个空数组或者字典，使用初始化语法。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; emptyArray = [&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;]()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; emptyDictionary = [&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;Float&lt;/span&gt;]()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果类型信息可以被推断出来，你可以用&lt;code&gt;[]&lt;/code&gt;和&lt;code&gt;[:]&lt;/code&gt;来创建空数组和空字典——就像你声明变量或者给函数传参数的时候一样。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;shoppingList = []&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;occupations = [:]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;控制流（Control-Flow）&quot;&gt;&lt;a href=&quot;#控制流（Control-Flow）&quot; class=&quot;headerlink&quot; title=&quot;控制流（Control Flow）&quot;&gt;&lt;/a&gt;控制流（Control Flow）&lt;/h3&gt;&lt;p&gt;使用&lt;code&gt;if&lt;/code&gt;和&lt;code&gt;switch&lt;/code&gt;来进行条件操作，使用&lt;code&gt;for-in&lt;/code&gt;、&lt;code&gt;for&lt;/code&gt;、&lt;code&gt;while&lt;/code&gt;和&lt;code&gt;repeat-while&lt;/code&gt;来进行循环。包裹条件和循环变量括号可以省略，但是语句体的大括号是必须的。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; individualScores = [&lt;span class=&quot;number&quot;&gt;75&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;43&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;103&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;87&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; teamScore = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; score &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; individualScores &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; score &amp;gt; &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        teamScore += &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        teamScore += &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(teamScore)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在&lt;code&gt;if&lt;/code&gt;语句中，条件必须是一个布尔表达式——这意味着像&lt;code&gt;if score { ... }&lt;/code&gt;这样的代码将报错，而不会隐形地与 0 做对比。&lt;/p&gt;
&lt;p&gt;你可以一起使用&lt;code&gt;if&lt;/code&gt;和&lt;code&gt;let&lt;/code&gt;来处理值缺失的情况。这些值可由可选值来代表。一个可选的值是一个具体的值或者是&lt;code&gt;nil&lt;/code&gt;以表示值缺失。在类型后面加一个问号来标记这个变量的值是可选的。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; optionalString: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;? = &lt;span class=&quot;string&quot;&gt;&quot;Hello&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(optionalString == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; optionalName: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;? = &lt;span class=&quot;string&quot;&gt;&quot;John Appleseed&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; greeting = &lt;span class=&quot;string&quot;&gt;&quot;Hello!&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; name = optionalName &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    greeting = &lt;span class=&quot;string&quot;&gt;&quot;Hello, &lt;span class=&quot;subst&quot;&gt;\(name)&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 把&lt;code&gt;optionalName&lt;/code&gt;改成&lt;code&gt;nil&lt;/code&gt;，&lt;code&gt;greeting&lt;/code&gt;会是什么？添加一个&lt;code&gt;else&lt;/code&gt;语句，当&lt;code&gt;optionalName&lt;/code&gt;是&lt;code&gt;nil&lt;/code&gt;时给&lt;code&gt;greeting&lt;/code&gt;赋一个不同的值。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果变量的可选值是&lt;code&gt;nil&lt;/code&gt;，条件会判断为&lt;code&gt;false&lt;/code&gt;，大括号中的代码会被跳过。如果不是&lt;code&gt;nil&lt;/code&gt;，会将值赋给&lt;code&gt;let&lt;/code&gt;后面的常量，这样代码块中就可以使用这个值了。&lt;br&gt;另一种处理可选值的方法是通过使用 &lt;code&gt;??&lt;/code&gt; 操作符来提供一个默认值。如果可选值缺失的话，可以使用默认值来代替。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; nickName: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;? = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; fullName: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;John Appleseed&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; informalGreeting = &lt;span class=&quot;string&quot;&gt;&quot;Hi &lt;span class=&quot;subst&quot;&gt;\(nickName ?? fullName)&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;switch&lt;/code&gt;支持任意类型的数据以及各种比较操作——不仅仅是整数以及测试相等。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; vegetable = &lt;span class=&quot;string&quot;&gt;&quot;red pepper&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; vegetable &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;celery&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Add some raisins and make ants on a log.&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;cucumber&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;watercress&quot;&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;That would make a good tea sandwich.&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; x &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; x.hasSuffix(&lt;span class=&quot;string&quot;&gt;&quot;pepper&quot;&lt;/span&gt;):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Is it a spicy &lt;span class=&quot;subst&quot;&gt;\(x)&lt;/span&gt;?&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Everything tastes good in soup.&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 删除&lt;code&gt;default&lt;/code&gt;语句，看看会有什么错误？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意&lt;code&gt;let&lt;/code&gt;在上述例子的等式中是如何使用的，它将匹配等式的值赋给常量&lt;code&gt;x&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;运行&lt;code&gt;switch&lt;/code&gt;中匹配到的子句之后，程序会退出&lt;code&gt;switch&lt;/code&gt;语句，并不会继续向下运行，所以不需要在每个子句结尾写&lt;code&gt;break&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;你可以使用&lt;code&gt;for-in&lt;/code&gt;来遍历字典，需要两个变量来表示每个键值对。字典是一个无序的集合，所以他们的键和值以任意顺序迭代结束。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; interestingNumbers = [&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;Prime&quot;&lt;/span&gt;: [&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;Fibonacci&quot;&lt;/span&gt;: [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;Square&quot;&lt;/span&gt;: [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;16&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;25&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; largest = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (kind, numbers) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; interestingNumbers &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; number &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; numbers &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; number &amp;gt; largest &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            largest = number&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(largest)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 添加另一个变量来记录现在和之前最大数字的类型。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;使用&lt;code&gt;while&lt;/code&gt;来重复运行一段代码直到不满足条件。循环条件也可以在结尾，保证能至少循环一次。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; n = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; n &amp;lt; &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    n = n * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(n)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; m = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;repeat&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    m = m * &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; m &amp;lt; &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(m)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你可以在循环中使用&lt;code&gt;..&amp;lt;&lt;/code&gt;来表示范围，也可以使用传统的写法，两者是等价的：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; firstForLoop = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;..&amp;lt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    firstForLoop += i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(firstForLoop)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; secondForLoop = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;; ++i &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    secondForLoop += i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(secondForLoop)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;使用&lt;code&gt;..&amp;lt;&lt;/code&gt;创建的范围不包含上界，如果想包含的话需要使用&lt;code&gt;...&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;函数和闭包（Functions-and-Closures）&quot;&gt;&lt;a href=&quot;#函数和闭包（Functions-and-Closures）&quot; class=&quot;headerlink&quot; title=&quot;函数和闭包（Functions and Closures）&quot;&gt;&lt;/a&gt;函数和闭包（Functions and Closures）&lt;/h3&gt;&lt;p&gt;使用&lt;code&gt;func&lt;/code&gt;来声明一个函数，使用名字和参数来调用函数。使用&lt;code&gt;-&amp;gt;&lt;/code&gt;来指定函数返回值的类型。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;greet&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(name: String, day: String)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Hello &lt;span class=&quot;subst&quot;&gt;\(name)&lt;/span&gt;, today is &lt;span class=&quot;subst&quot;&gt;\(day)&lt;/span&gt;.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;greet(&lt;span class=&quot;string&quot;&gt;&quot;Bob&quot;&lt;/span&gt;, day: &lt;span class=&quot;string&quot;&gt;&quot;Tuesday&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 删除&lt;code&gt;day&lt;/code&gt;参数，添加一个参数来表示今天吃了什么午饭。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;使用元组来让一个函数返回多个值。该元组的元素可以用名称或数字来表示。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;calculateStatistics&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(scores: [Int])&lt;/span&gt;&lt;/span&gt; -&amp;gt; (&lt;span class=&quot;built_in&quot;&gt;min&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;max&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;, sum: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;min&lt;/span&gt; = scores[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;max&lt;/span&gt; = scores[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; sum = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; score &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; scores &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; score &amp;gt; &lt;span class=&quot;built_in&quot;&gt;max&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;max&lt;/span&gt; = score&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; score &amp;lt; &lt;span class=&quot;built_in&quot;&gt;min&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;min&lt;/span&gt; = score&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sum += score&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;min&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;max&lt;/span&gt;, sum)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; statistics = calculateStatistics([&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(statistics.sum)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(statistics.&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;函数可以带有可变个数的参数，这些参数在函数内表现为数组的形式：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sumOf&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(numbers: Int...)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; sum = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; number &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; numbers &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sum += number&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sumOf()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sumOf(&lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;597&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 写一个计算参数平均值的函数。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;函数可以嵌套。被嵌套的函数可以访问外侧函数的变量，你可以使用嵌套函数来重构一个太长或者太复杂的函数。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;returnFifteen&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; y = &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        y += &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    add()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;returnFifteen()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;函数是第一等类型，这意味着函数可以作为另一个函数的返回值。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;makeIncrementer&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; (&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;addOne&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(number: Int)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; + number&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; addOne&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; increment = makeIncrementer()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;increment(&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;函数也可以当做参数传入另一个函数。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;hasAnyMatches&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(list: [Int], condition: Int -&amp;gt; Bool)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; item &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; list &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; condition(item) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;lessThanTen&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(number: Int)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; number &amp;lt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; numbers = [&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;19&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hasAnyMatches(numbers, condition: lessThanTen)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;函数实际上是一种特殊的闭包:它是一段能之后被调取的代码。闭包中的代码能访问闭包所建作用域中能得到的变量和函数，即使闭包是在一个不同的作用域被执行的 - 你已经在嵌套函数例子中所看到。你可以使用&lt;code&gt;{}&lt;/code&gt;来创建一个匿名闭包。使用&lt;code&gt;in&lt;/code&gt;将参数和返回值类型声明与闭包函数体进行分离。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;numbers.&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (number: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; result = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; * number&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 重写闭包，对所有奇数返回&lt;code&gt;0&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;有很多种创建更简洁的闭包的方法。如果一个闭包的类型已知，比如作为一个回调函数，你可以忽略参数的类型和返回值。单个语句闭包会把它语句的值当做结果返回。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; mappedNumbers = numbers.&lt;span class=&quot;built_in&quot;&gt;map&lt;/span&gt;(&amp;#123; number &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt; * number &amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(mappedNumbers)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你可以通过参数位置而不是参数名字来引用参数——这个方法在非常短的闭包中非常有用。当一个闭包作为最后一个参数传给一个函数的时候，它可以直接跟在括号后面。当一个闭包是传给函数的唯一参数，你可以完全忽略括号。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sortedNumbers = numbers.&lt;span class=&quot;built_in&quot;&gt;sort&lt;/span&gt; &amp;#123; $&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;gt; $&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(sortedNumbers)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;对象和类（Objects-and-Classes）&quot;&gt;&lt;a href=&quot;#对象和类（Objects-and-Classes）&quot; class=&quot;headerlink&quot; title=&quot;对象和类（Objects and Classes）&quot;&gt;&lt;/a&gt;对象和类（Objects and Classes）&lt;/h3&gt;&lt;p&gt;使用&lt;code&gt;class&lt;/code&gt;和类名来创建一个类。类中属性的声明和常量、变量声明一样，唯一的区别就是它们的上下文是类。同样，方法和函数声明也一样。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Shape&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; numberOfSides = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;simpleDescription&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;A shape with &lt;span class=&quot;subst&quot;&gt;\(numberOfSides)&lt;/span&gt; sides.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 使用&lt;code&gt;let&lt;/code&gt;添加一个常量属性，再添加一个接收一个参数的方法。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;要创建一个类的实例，在类名后面加上括号。使用点语法来访问实例的属性和方法。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; shape = &lt;span class=&quot;type&quot;&gt;Shape&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;shape.numberOfSides = &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; shapeDescription = shape.simpleDescription()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个版本的&lt;code&gt;Shape&lt;/code&gt;类缺少了一些重要的东西：一个构造函数来初始化类实例。使用&lt;code&gt;init&lt;/code&gt;来创建一个构造器。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NamedShape&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; numberOfSides: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; name: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(name: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.name = name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;simpleDescription&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;A shape with &lt;span class=&quot;subst&quot;&gt;\(numberOfSides)&lt;/span&gt; sides.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;注意&lt;code&gt;self&lt;/code&gt;被用来区别实例变量。当你创建实例的时候，像传入函数参数一样给类传入构造器的参数。每个属性都需要赋值——无论是通过声明（就像&lt;code&gt;numberOfSides&lt;/code&gt;）还是通过构造器（就像&lt;code&gt;name&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;如果你需要在删除对象之前进行一些清理工作，使用&lt;code&gt;deinit&lt;/code&gt;创建一个析构函数。&lt;/p&gt;
&lt;p&gt;子类的定义方法是在它们的类名后面加上父类的名字，用冒号分割。创建类的时候并不需要一个标准的根类，所以你可以忽略父类。&lt;/p&gt;
&lt;p&gt;子类如果要重写父类的方法的话，需要用&lt;code&gt;override&lt;/code&gt;标记——如果没有添加&lt;code&gt;override&lt;/code&gt;就重写父类方法的话编译器会报错。编译器同样会检测&lt;code&gt;override&lt;/code&gt;标记的方法是否确实在父类中。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Square&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;NamedShape&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; sideLength: &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(sideLength: &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt;, name: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.sideLength = sideLength&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(name: name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        numberOfSides = &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;area&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt;  &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; sideLength * sideLength&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;simpleDescription&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;A square with sides of length &lt;span class=&quot;subst&quot;&gt;\(sideLength)&lt;/span&gt;.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; test = &lt;span class=&quot;type&quot;&gt;Square&lt;/span&gt;(sideLength: &lt;span class=&quot;number&quot;&gt;5.2&lt;/span&gt;, name: &lt;span class=&quot;string&quot;&gt;&quot;my test square&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;test.area()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;test.simpleDescription()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 创建&lt;code&gt;NamedShape&lt;/code&gt;的另一个子类&lt;code&gt;Circle&lt;/code&gt;，构造器接收两个参数，一个是半径一个是名称，在子类&lt;code&gt;Circle&lt;/code&gt;中实现&lt;code&gt;area()&lt;/code&gt;和&lt;code&gt;simpleDescription()&lt;/code&gt;方法。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;除了储存简单的属性之外，属性可以有 getter 和 setter 。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;EquilateralTriangle&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;NamedShape&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; sideLength: &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(sideLength: &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt;, name: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.sideLength = sideLength&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(name: name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        numberOfSides = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; perimeter: &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt; * sideLength&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            sideLength = newValue / &lt;span class=&quot;number&quot;&gt;3.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;simpleDescription&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;An equilateral triagle with sides of length &lt;span class=&quot;subst&quot;&gt;\(sideLength)&lt;/span&gt;.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; triangle = &lt;span class=&quot;type&quot;&gt;EquilateralTriangle&lt;/span&gt;(sideLength: &lt;span class=&quot;number&quot;&gt;3.1&lt;/span&gt;, name: &lt;span class=&quot;string&quot;&gt;&quot;a triangle&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(triangle.perimeter)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;triangle.perimeter = &lt;span class=&quot;number&quot;&gt;9.9&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(triangle.sideLength)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在&lt;code&gt;perimeter&lt;/code&gt;的 &lt;code&gt;setter&lt;/code&gt; 中，新值的名字是&lt;code&gt;newValue&lt;/code&gt;。你可以在&lt;code&gt;set&lt;/code&gt;之后显式的设置一个名字。&lt;/p&gt;
&lt;p&gt;注意&lt;code&gt;EquilateralTriangle&lt;/code&gt;类的构造器执行了三步：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;设置子类声明的属性值&lt;/li&gt;
&lt;li&gt;调用父类的构造器&lt;/li&gt;
&lt;li&gt;改变父类定义的属性值。其他的工作比如调用方法、&lt;code&gt;getters&lt;/code&gt;和&lt;code&gt;setters&lt;/code&gt;也可以在这个阶段完成。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果你不需要计算属性，但是仍然需要在设置一个新值之前或者之后运行代码，使用&lt;code&gt;willSet&lt;/code&gt;和&lt;code&gt;didSet&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;比如，下面的类确保三角形的边长总是和正方形的边长相同。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;TriangleAndSquare&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; triangle: &lt;span class=&quot;type&quot;&gt;EquilateralTriangle&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;willSet&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            square.sideLength = newValue.sideLength&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; square: &lt;span class=&quot;type&quot;&gt;Square&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;willSet&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            triangle.sideLength = newValue.sideLength&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(size: &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt;, name: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        square = &lt;span class=&quot;type&quot;&gt;Square&lt;/span&gt;(sideLength: size, name: name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        triangle = &lt;span class=&quot;type&quot;&gt;EquilateralTriangle&lt;/span&gt;(sideLength: size, name: name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; triangleAndSquare = &lt;span class=&quot;type&quot;&gt;TriangleAndSquare&lt;/span&gt;(size: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, name: &lt;span class=&quot;string&quot;&gt;&quot;another test shape&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(triangleAndSquare.square.sideLength)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(triangleAndSquare.triangle.sideLength)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;triangleAndSquare.square = &lt;span class=&quot;type&quot;&gt;Square&lt;/span&gt;(sideLength: &lt;span class=&quot;number&quot;&gt;50&lt;/span&gt;, name: &lt;span class=&quot;string&quot;&gt;&quot;larger square&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(triangleAndSquare.triangle.sideLength)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;处理变量的可选值时，你可以在操作（比如方法、属性和子脚本）之前加?。如果&lt;code&gt;?&lt;/code&gt;之前的值是&lt;code&gt;nil&lt;/code&gt;，&lt;code&gt;?&lt;/code&gt;后面的东西都会被忽略，并且整个表达式返回&lt;code&gt;nil&lt;/code&gt;。否则，&lt;code&gt;?&lt;/code&gt;之后的东西都会被运行。在这两种情况下，整个表达式的值也是一个可选值。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; optionalSquare: &lt;span class=&quot;type&quot;&gt;Square&lt;/span&gt;? = &lt;span class=&quot;type&quot;&gt;Square&lt;/span&gt;(sideLength: &lt;span class=&quot;number&quot;&gt;2.5&lt;/span&gt;, name: &lt;span class=&quot;string&quot;&gt;&quot;optional square&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sideLength = optionalSquare?.sideLength&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;枚举和结构体（Enumerations-and-Structures）&quot;&gt;&lt;a href=&quot;#枚举和结构体（Enumerations-and-Structures）&quot; class=&quot;headerlink&quot; title=&quot;枚举和结构体（Enumerations and Structures）&quot;&gt;&lt;/a&gt;枚举和结构体（Enumerations and Structures）&lt;/h3&gt;&lt;p&gt;使用&lt;code&gt;enum&lt;/code&gt;来创建一个枚举。就像类和其他所有命名类型一样，枚举可以包含方法。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Rank&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;Int&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Ace&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Two&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Three&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Four&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Five&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Six&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Seven&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Eight&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Nine&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Ten&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Jack&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Queen&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;King&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;simpleDescription&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Ace&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;ace&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Jack&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;jack&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Queen&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;queen&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;King&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;king&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.rawValue)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; ace = &lt;span class=&quot;type&quot;&gt;Rank&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;Ace&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; aceRawValue = ace.rawValue&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 写一个函数，通过比较它们的原始值来比较两个&lt;code&gt;Rank&lt;/code&gt;值。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在上面的例子中，枚举原始值的类型是&lt;code&gt;Int&lt;/code&gt;，所以你只需要设置第一个原始值。剩下的原始值会按照顺序赋值。你也可以使用字符串或者浮点数作为枚举的原始值。使用&lt;code&gt;rawValue&lt;/code&gt;属性来访问一个枚举成员的原始值。&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;init?(rawValue:)&lt;/code&gt;初始化构造器在原始值和枚举值之间进行转换。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; convertedRank = &lt;span class=&quot;type&quot;&gt;Rank&lt;/span&gt;(rawValue: &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; threeDescription = convertedRank.simpleDescription()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;枚举的成员值是实际值，并不是原始值的另一种表达方法。实际上，以防原始值没有意义，你不需要设置。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Suit&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Spades&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Hearts&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Diamonds&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;Clubs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;simpleDescription&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Spades&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;spades&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Hearts&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;hearts&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Diamonds&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;diamonds&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Clubs&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;clubs&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; hearts = &lt;span class=&quot;type&quot;&gt;Suit&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;Hearts&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; heartsDescription = hearts.simpleDescription()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 给&lt;code&gt;Suit&lt;/code&gt;添加一个&lt;code&gt;color()&lt;/code&gt;方法，对&lt;code&gt;spades&lt;/code&gt;和&lt;code&gt;clubs&lt;/code&gt;返回“black”，对&lt;code&gt;hearts&lt;/code&gt;和&lt;code&gt;diamonds&lt;/code&gt;返回“red”。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意，有两种方式可以引用&lt;code&gt;Hearts&lt;/code&gt;成员：给&lt;code&gt;hearts&lt;/code&gt;常量赋值时，枚举成员&lt;code&gt;Suit&lt;/code&gt;.&lt;code&gt;Hearts&lt;/code&gt;需要用全名来引用，因为常量没有显式指定类型。在&lt;code&gt;switch&lt;/code&gt;里，枚举成员使用缩写&lt;code&gt;.Hearts&lt;/code&gt;来引用，因为&lt;code&gt;self&lt;/code&gt;的值已经知道是一个&lt;code&gt;suit&lt;/code&gt;。已知变量类型的情况下你可以使用缩写。&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;struct&lt;/code&gt;来创建一个结构体。结构体和类有很多相同的地方，比如方法和构造器。它们之间最大的一个区别就是结构体是传值，类是传引用。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Card&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; rank: &lt;span class=&quot;type&quot;&gt;Rank&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; suit: &lt;span class=&quot;type&quot;&gt;Suit&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;simpleDescription&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;The &lt;span class=&quot;subst&quot;&gt;\(rank.simpleDescription()&lt;/span&gt;) of &lt;span class=&quot;subst&quot;&gt;\(suit.simpleDescription()&lt;/span&gt;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; threeOfSpades = &lt;span class=&quot;type&quot;&gt;Card&lt;/span&gt;(rank: .&lt;span class=&quot;type&quot;&gt;Three&lt;/span&gt;, suit: .&lt;span class=&quot;type&quot;&gt;Spades&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; threeOfSpadesDescription = threeOfSpades.simpleDescription()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 给&lt;code&gt;Card&lt;/code&gt;添加一个方法，创建一副完整的扑克牌并把每张牌的 &lt;code&gt;rank&lt;/code&gt; 和 &lt;code&gt;suit&lt;/code&gt; 对应起来。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;一个枚举成员的实例可以有实例值。相同枚举成员的实例可以有不同的值。创建实例的时候传入值即可。实例值和原始值是不同的：枚举成员的原始值对于所有实例都是相同的，而且你是在定义枚举的时候设置原始值。&lt;/p&gt;
&lt;p&gt;例如，考虑从服务器获取日出和日落的时间。服务器会返回正常结果或者错误信息。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ServerResponse&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Result&lt;/span&gt;(&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; success = &lt;span class=&quot;type&quot;&gt;ServerResponse&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;Result&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;6:00 am&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;8:09 pm&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; failure = &lt;span class=&quot;type&quot;&gt;ServerResponse&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;Error&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Out of cheese.&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; success &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Result&lt;/span&gt;(sunrise, sunset):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; serverResponse = &lt;span class=&quot;string&quot;&gt;&quot;Sunrise is at &lt;span class=&quot;subst&quot;&gt;\(sunrise)&lt;/span&gt; and sunset is at &lt;span class=&quot;subst&quot;&gt;\(sunset)&lt;/span&gt;.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; .&lt;span class=&quot;type&quot;&gt;Error&lt;/span&gt;(error):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; serverResponse = &lt;span class=&quot;string&quot;&gt;&quot;Failure...  &lt;span class=&quot;subst&quot;&gt;\(error)&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 给&lt;code&gt;ServerResponse&lt;/code&gt;和&lt;code&gt;switch&lt;/code&gt;添加第三种情况。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意如何从&lt;code&gt;ServerResponse&lt;/code&gt;中提取日升和日落时间并用得到的值用来和&lt;code&gt;switch&lt;/code&gt;的情况作比较。&lt;/p&gt;
&lt;h3 id=&quot;协议和扩展（Protocols-and-Extensions）&quot;&gt;&lt;a href=&quot;#协议和扩展（Protocols-and-Extensions）&quot; class=&quot;headerlink&quot; title=&quot;协议和扩展（Protocols and Extensions）&quot;&gt;&lt;/a&gt;协议和扩展（Protocols and Extensions）&lt;/h3&gt;&lt;p&gt;使用&lt;code&gt;protocol&lt;/code&gt;来声明一个协议。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ExampleProtocol&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; simpleDescription: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;mutating&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;adjust&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;类、枚举和结构体都可以实现协议。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SimpleClass&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;ExampleProtocol&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; simpleDescription: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;A very simple class.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; anotherProperty: &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;69105&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;adjust&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        simpleDescription += &lt;span class=&quot;string&quot;&gt;&quot;  Now 100% adjusted.&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; a = &lt;span class=&quot;type&quot;&gt;SimpleClass&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a.adjust()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; aDescription = a.simpleDescription&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SimpleStructure&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;ExampleProtocol&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; simpleDescription: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;A simple structure&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;mutating&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;adjust&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        simpleDescription += &lt;span class=&quot;string&quot;&gt;&quot; (adjusted)&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; b = &lt;span class=&quot;type&quot;&gt;SimpleStructure&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;b.adjust()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; bDescription = b.simpleDescription&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 写一个实现这个协议的枚举。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;注意声明&lt;code&gt;SimpleStructure&lt;/code&gt;时候&lt;code&gt;mutating&lt;/code&gt;关键字用来标记一个会修改结构体的方法。&lt;code&gt;SimpleClass&lt;/code&gt;的声明不需要标记任何方法，因为类中的方法通常可以修改类属性（类的性质）。&lt;/p&gt;
&lt;p&gt;使用&lt;code&gt;extension&lt;/code&gt;来为现有的类型添加功能，比如新的方法和计算属性。你可以使用扩展在别处修改定义，甚至是从外部库或者框架引入的一个类型，使得这个类型遵循某个协议。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Int&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;ExampleProtocol&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; simpleDescription: &lt;span class=&quot;type&quot;&gt;String&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;The number &lt;span class=&quot;subst&quot;&gt;\(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;)&lt;/span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;mutating&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;adjust&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; += &lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;.simpleDescription)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 给&lt;code&gt;Double&lt;/code&gt;类型写一个扩展，添加&lt;code&gt;absoluteValue&lt;/code&gt;功能。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;你可以像使用其他命名类型一样使用协议名——例如，创建一个有不同类型但是都实现一个协议的对象集合。当你处理类型是协议的值时，协议外定义的方法不可用。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; protocolValue: &lt;span class=&quot;type&quot;&gt;ExampleProtocol&lt;/span&gt; = a&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(protocolValue.simpleDescription)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// print(protocolValue.anotherProperty)  // Uncomment to see the error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;即使&lt;code&gt;protocolValue&lt;/code&gt;变量运行时的类型是&lt;code&gt;simpleClass&lt;/code&gt;，编译器会把它的类型当做&lt;code&gt;ExampleProtocol&lt;/code&gt;。这表示你不能调用类在它实现的协议之外实现的方法或者属性。&lt;/p&gt;
&lt;h3 id=&quot;泛型（Generics）&quot;&gt;&lt;a href=&quot;#泛型（Generics）&quot; class=&quot;headerlink&quot; title=&quot;泛型（Generics）&quot;&gt;&lt;/a&gt;泛型（Generics）&lt;/h3&gt;&lt;p&gt;在尖括号里写一个名字来创建一个泛型函数或者类型。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;repeatItem&lt;/span&gt;&amp;lt;Item&amp;gt;&lt;span class=&quot;params&quot;&gt;(item: Item, numberOfTimes: Int)&lt;/span&gt;&lt;/span&gt; -&amp;gt; [&lt;span class=&quot;type&quot;&gt;Item&lt;/span&gt;] &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; result = [&lt;span class=&quot;type&quot;&gt;Item&lt;/span&gt;]()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;..&amp;lt;numberOfTimes &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        result.append(item)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; result&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;repeatItem(&lt;span class=&quot;string&quot;&gt;&quot;knock&quot;&lt;/span&gt;, numberOfTimes:&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你也可以创建泛型函数、方法、类、枚举和结构体。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Reimplement the Swift standard library&#39;s optional type&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;OptionalValue&lt;/span&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;Wrapped&lt;/span&gt;&amp;gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;None&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Some&lt;/span&gt;(&lt;span class=&quot;type&quot;&gt;Wrapped&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; possibleInteger: &lt;span class=&quot;type&quot;&gt;OptionalValue&lt;/span&gt;&amp;lt;&lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;&amp;gt; = .&lt;span class=&quot;type&quot;&gt;None&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;possibleInteger = .&lt;span class=&quot;type&quot;&gt;Some&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在类型名后面使用&lt;code&gt;where&lt;/code&gt;来指定对类型的需求，比如，限定类型实现某一个协议，限定两个类型是相同的，或者限定某个类必须有一个特定的父类。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;anyCommonElements&lt;/span&gt; &amp;lt;T: SequenceType, U: SequenceType where T.Generator.Element: Equatable, T.Generator.Element == U.Generator.Element&amp;gt; &lt;span class=&quot;params&quot;&gt;(lhs: T, &lt;span class=&quot;number&quot;&gt;_&lt;/span&gt; rhs: U)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; lhsItem &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; lhs &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; rhsItem &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; rhs &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; lhsItem == rhsItem &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;anyCommonElements([&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;], [&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;练习： 修改&lt;code&gt;anyCommonElements(_:_:)&lt;/code&gt;函数来创建一个函数，返回一个数组，内容是两个序列的共有元素。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;T: Equatable&amp;gt;&lt;/code&gt;和&lt;code&gt;&amp;lt;T where T: Equatable&amp;gt;&lt;/code&gt;是等价的。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;通常来说，编程语言教程中的第一个程序应该在屏幕上打印“Hello, world”。在 Swift 中，可以用一行代码实现：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;spa
    
    </summary>
    
      <category term="Swift基础" scheme="http://ios.idup.club/categories/Swift%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>关于Swift</title>
    <link href="http://ios.idup.club/swift/About-Swift/"/>
    <id>http://ios.idup.club/swift/About-Swift/</id>
    <published>2016-02-09T04:11:15.000Z</published>
    <updated>2016-03-07T15:02:43.632Z</updated>
    
    <content type="html">&lt;p&gt;Swift 是一种新的编程语言，用于编写 iOS，OS X 和 watchOS应用程序。Swift 结合了 C 和 Objective-C 的优点并且不受 C 兼容性的限制。Swift 采用安全的编程模式并添加了很多新特性，这将使编程更简单，更灵活，也更有趣。Swift 是基于成熟而且倍受喜爱的 Cocoa 和 Cocoa Touch 框架，它的降临将重新定义软件开发。&lt;/p&gt;
&lt;p&gt;Swift 的开发从很久之前就开始了。为了给 Swift 打好基础，苹果公司改进了编译器，调试器和框架结构。我们使用自动引用计数（Automatic Reference Counting, ARC）来简化内存管理。我们在 Foundation 和 Cocoa 的基础上构建框架栈使其完全现代化和标准化。 Objective-C 本身支持块、集合语法和模块，所以框架可以轻松支持现代编程语言技术。正是得益于这些基础工作，我们现在才能发布这样一个用于未来苹果软件开发的新语言。&lt;/p&gt;
&lt;p&gt;Objective-C 开发者对 Swift 并不会感到陌生。它采用了 Objective-C 的命名参数以及动态对象模型，可以无缝对接到现有的 Cocoa 框架，并且可以兼容 Objective-C 代码。在此基础之上，Swift 还有许多新特性并且支持过程式编程和面向对象编程。&lt;/p&gt;
&lt;p&gt;Swift 对于初学者来说也很友好。它是第一个既满足工业标准又像脚本语言一样充满表现力和趣味的脚本语言。它支持代码预览，这个革命性的特性可以允许程序员在不编译和运行应用程序的前提下运行 Swift 代码并实时查看结果。&lt;/p&gt;
&lt;p&gt;Swift 将现代编程语言的精华和苹果工程师文化的智慧结合了起来。编译器对性能进行了优化，编程语言对开发进行了优化，两者互不干扰，鱼与熊掌兼得。Swift 既可以用于开发 “hello, world” 这样的小程序，也可以用于开发一套完整的操作系统。所有的这些特性让 Swift 对于开发者和苹果来说都是一项值得的投资。&lt;/p&gt;
&lt;p&gt;Swift 是编写 iOS，OS X 和 watchOS应用的极佳手段，并将伴随着新的特性和功能持续演进。&lt;/p&gt;
&lt;p&gt;注：本篇内容来自&lt;a href=&quot;http://wiki.jikexueyuan.com/project/swift/chapter1/01_swift.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://wiki.jikexueyuan.com/project/swift/chapter1/01_swift.html&lt;/a&gt;，其对应英文原文为&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/index.html&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Swift 是一种新的编程语言，用于编写 iOS，OS X 和 watchOS应用程序。Swift 结合了 C 和 Objective-C 的优点并且不受 C 兼容性的限制。Swift 采用安全的编程模式并添加了很多新特性，这将使编程更简单，更灵活，也更有趣。Swift 是
    
    </summary>
    
      <category term="Swift基础" scheme="http://ios.idup.club/categories/Swift%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>关于本站内容</title>
    <link href="http://ios.idup.club/swift/About-This-Site/"/>
    <id>http://ios.idup.club/swift/About-This-Site/</id>
    <published>2016-02-01T04:15:58.000Z</published>
    <updated>2016-03-07T15:02:43.632Z</updated>
    
    <content type="html">&lt;p&gt;本站内容主要来自&lt;a href=&quot;http://developer.apple.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Apple开发者网站&lt;/a&gt;英文内容的中文翻译版&lt;a href=&quot;http://wiki.jikexueyuan.com/project/swift/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://wiki.jikexueyuan.com/project/swift/&lt;/a&gt;。本站目的在于为iOS应用开发初学者提供必要的Swift语言基础知识，可能对原有内容（包括原始Apple网站内容和中文翻译内容）进行增删和重新组织。本站不持有所有内容的任何版权。如有问题请联系&lt;a href=&quot;mailto:swift@idup.club&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;swift@idup.club&lt;/a&gt;。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本站内容主要来自&lt;a href=&quot;http://developer.apple.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Apple开发者网站&lt;/a&gt;英文内容的中文翻译版&lt;a href=&quot;http://wiki.jikexueyuan.com
    
    </summary>
    
      <category term="Swift基础" scheme="http://ios.idup.club/categories/Swift%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Location</title>
    <link href="http://ios.idup.club/demo/Location/"/>
    <id>http://ios.idup.club/demo/Location/</id>
    <published>2015-12-16T03:41:42.000Z</published>
    <updated>2016-03-20T05:51:35.406Z</updated>
    
    <content type="html">&lt;p&gt;本教程主要介绍如何在应用中使用定位和地图技术。 相应代码位于 &lt;a href=&quot;https://github.com/idup/Location&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Location&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;1-新建项目&quot;&gt;&lt;a href=&quot;#1-新建项目&quot; class=&quot;headerlink&quot; title=&quot;1.新建项目&quot;&gt;&lt;/a&gt;1.新建项目&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;/picture/6-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;新建项目，只需选择普通的SingleViewApplication即可&lt;/p&gt;
&lt;h4 id=&quot;2-编辑Storyboard&quot;&gt;&lt;a href=&quot;#2-编辑Storyboard&quot; class=&quot;headerlink&quot; title=&quot;2.编辑Storyboard&quot;&gt;&lt;/a&gt;2.编辑Storyboard&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;/picture/6-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在Storyboard中拖好页面及其对应控件，具体可参考Demo的storyboard，在本demo中主要由三个页面&lt;/p&gt;
&lt;p&gt;1.一个页面用于显示CoreLocation获得的经纬度信息&lt;/p&gt;
&lt;p&gt;2.一个页面用于显示MapView&lt;/p&gt;
&lt;p&gt;3.还有一个页面用于显示地图的搜索结果&lt;/p&gt;
&lt;h4 id=&quot;3-创建ViewController&quot;&gt;&lt;a href=&quot;#3-创建ViewController&quot; class=&quot;headerlink&quot; title=&quot;3.创建ViewController&quot;&gt;&lt;/a&gt;3.创建ViewController&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;/picture/6-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;创建不同的ViewController用以操纵页面控件，并且将代码与相应页面绑定&lt;/p&gt;
&lt;p&gt;1.CoreLocationViewController与显示经纬度信息的页面绑定&lt;/p&gt;
&lt;p&gt;2.MapViewControllerMapView与显示MapView的页面绑定&lt;/p&gt;
&lt;p&gt;3.MapSearchResultTableViewController与显示地图的搜索结果的页面绑定&lt;/p&gt;
&lt;h4 id=&quot;4-修改info-plist文件&quot;&gt;&lt;a href=&quot;#4-修改info-plist文件&quot; class=&quot;headerlink&quot; title=&quot;4.修改info.plist文件&quot;&gt;&lt;/a&gt;4.修改info.plist文件&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;/picture/6-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在info.plist中添加两个字段，分别为NSLocationWhenInUseUsageDescription和 NSLocationAlwaysUsageDescription，并为其填入value，value的信息将会在申请定位权限时显示给用户&lt;/p&gt;
&lt;h4 id=&quot;5-ViewController代码编写&quot;&gt;&lt;a href=&quot;#5-ViewController代码编写&quot; class=&quot;headerlink&quot; title=&quot;5.ViewController代码编写&quot;&gt;&lt;/a&gt;5.ViewController代码编写&lt;/h4&gt;&lt;p&gt;1.CoreLocationViewController中利用CoreLocation获得定位，并将获得的定位信息显示在页面上&lt;/p&gt;
&lt;p&gt;2.MapViewController将用户的当前位置和用户的查找结果大头针显示在MapView&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本教程主要介绍如何在应用中使用定位和地图技术。 相应代码位于 &lt;a href=&quot;https://github.com/idup/Location&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Location
    
    </summary>
    
      <category term="iOS技术示例" scheme="http://ios.idup.club/categories/iOS%E6%8A%80%E6%9C%AF%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>Camera</title>
    <link href="http://ios.idup.club/demo/Camera/"/>
    <id>http://ios.idup.club/demo/Camera/</id>
    <published>2015-12-16T03:41:29.000Z</published>
    <updated>2016-03-20T05:51:22.542Z</updated>
    
    <content type="html">&lt;p&gt;本教程主要介绍如何在应用中使用摄像头技术。 相应代码位于 &lt;a href=&quot;https://github.com/idup/Camera&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Camera&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;1-新建项目&quot;&gt;&lt;a href=&quot;#1-新建项目&quot; class=&quot;headerlink&quot; title=&quot;1.新建项目&quot;&gt;&lt;/a&gt;1.新建项目&lt;/h4&gt;&lt;p&gt;运行 Xcode ,选择 File-&amp;gt;New-&amp;gt;Project… (键盘快捷键是 Command + Shift + N )。 在新出现的窗又中,选择左 侧iOS部分的 Application ,然后选择右 边的 Single View Application (单窗又应用)模板,单击 Next 按钮。 在文本框 Product Name 中填入 Cassini , 在 Language 弹出式菜单中选择 Swift , 在 Devices 选择 iPhone 。确保标 题为 Use Core Data 的选择框未 被选中, 点击下一步按钮,单击创建按钮创建项目。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/5-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;2-拖拽界面并采用autolayout布局&quot;&gt;&lt;a href=&quot;#2-拖拽界面并采用autolayout布局&quot; class=&quot;headerlink&quot; title=&quot;2.拖拽界面并采用autolayout布局&quot;&gt;&lt;/a&gt;2.拖拽界面并采用autolayout布局&lt;/h4&gt;&lt;p&gt;￼&lt;br&gt;&lt;img src=&quot;/picture/5-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/5-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/5-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;3-1实现action-sheet并初始化一个UIImagepicker&quot;&gt;&lt;a href=&quot;#3-1实现action-sheet并初始化一个UIImagepicker&quot; class=&quot;headerlink&quot; title=&quot;3.1实现action sheet并初始化一个UIImagepicker&quot;&gt;&lt;/a&gt;3.1实现action sheet并初始化一个UIImagepicker&lt;/h5&gt;&lt;p&gt;在swift中,action sheet 升级为 view controller,所以在使用的时候要先&lt;br&gt;init一个action sheet 然后添加相对应的action。&lt;br&gt;UIImagepicker 是对camera最简单的操作的API,我们可以相对容易地调 用UIImagepicker来实现平实对image操作的大部分功能,但是,当你有 更高级的自定义需求时,需要采用AVFoundation来更高级地自定义对多 媒体设备的操作。(详情见教程)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/5-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;3-2-实现UIImagepicker-delegate&quot;&gt;&lt;a href=&quot;#3-2-实现UIImagepicker-delegate&quot; class=&quot;headerlink&quot; title=&quot;3.2 实现UIImagepicker delegate&quot;&gt;&lt;/a&gt;3.2 实现UIImagepicker delegate&lt;/h5&gt;&lt;p&gt;继承 UIImagepicker delegate,实现它的delegate函数,就能够拿到 camera或者photo library中用户选择的图片或者视频。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/5-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本教程主要介绍如何在应用中使用摄像头技术。 相应代码位于 &lt;a href=&quot;https://github.com/idup/Camera&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Camera&lt;/a&gt;&lt;/
    
    </summary>
    
      <category term="iOS技术示例" scheme="http://ios.idup.club/categories/iOS%E6%8A%80%E6%9C%AF%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>Bouncer</title>
    <link href="http://ios.idup.club/demo/Bouncer/"/>
    <id>http://ios.idup.club/demo/Bouncer/</id>
    <published>2015-12-15T15:51:29.000Z</published>
    <updated>2016-03-20T05:51:14.206Z</updated>
    
    <content type="html">&lt;p&gt;本教程将介绍如何在应用中使用手势和传感器技术。 相应代码位于&lt;a href=&quot;https://github.com/idup/Bouncer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Bouncer&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/3-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-新建项目&quot;&gt;&lt;a href=&quot;#1-新建项目&quot; class=&quot;headerlink&quot; title=&quot;1.新建项目&quot;&gt;&lt;/a&gt;1.新建项目&lt;/h3&gt;&lt;p&gt;运行Xcode，选择File-&amp;gt;New-&amp;gt;Project…(键盘快捷键是Command + Shift + N)。在新出现的窗口中，选择左侧iOS部分的Application，然后选择右边的Single View Application（单窗口应用）模板，单击Next按钮。&lt;br&gt;在文本框Product Name中填入Bouncer, 在Language弹出式菜单中选择Swift，在Devices弹出式菜单中选择iPhone。确保标题为Use Core Data的选择框未被选中，点击下一步按钮,单击创建按钮创建项目。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/3-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-Core-Motion&quot;&gt;&lt;a href=&quot;#2-Core-Motion&quot; class=&quot;headerlink&quot; title=&quot;2.Core Motion&quot;&gt;&lt;/a&gt;2.Core Motion&lt;/h3&gt;&lt;p&gt;Core Motion对CMMotionManager,CMAccelerometerData,CMDeviceMotion, CMGyroData进行了很好的封装,可以让开发者进行方便的管理。&lt;br&gt;￼&lt;br&gt;CMMotionManager可以访问所有从iOS设备上获取的Core Motion数据。主要方式 分为pull和push两种,pull需要手动向manager索要数据,即最近一次的采样数据, 而push方式则是自动在每一个采样数据到来的时候执行闭包里面的函数进行处理。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/3-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;2-1加速计原理&quot;&gt;&lt;a href=&quot;#2-1加速计原理&quot; class=&quot;headerlink&quot; title=&quot;2.1加速计原理&quot;&gt;&lt;/a&gt;2.1加速计原理&lt;/h4&gt;&lt;p&gt;iPhone的加速度计有三个轴,分别是x轴、y轴、z轴,如上图所示。这是一个三 维立体空间,可以捕获用户每一个角度的操作。通过这三个轴可以计算iPhone倾斜的 角度,从而计算出加速度。&lt;/p&gt;
&lt;p&gt;(1)对于iphone手机来说,画面上下为y轴,左右为z轴,贯穿屏幕为z轴。&lt;/p&gt;
&lt;p&gt;(2)向上,向右,手机的前面分别是各轴的正方向。&lt;/p&gt;
&lt;h4 id=&quot;2-2加速计使用步骤&quot;&gt;&lt;a href=&quot;#2-2加速计使用步骤&quot; class=&quot;headerlink&quot; title=&quot;2.2加速计使用步骤&quot;&gt;&lt;/a&gt;2.2加速计使用步骤&lt;/h4&gt;&lt;p&gt;(1)实例化CMMotionManager类&lt;/p&gt;
&lt;p&gt;(2)向CMMotionManager的accelerometerUpdateInterval属性中设置通知间隔 时间值。&lt;/p&gt;
&lt;p&gt;(3)使用NSOperationQueue.currentQueue()建立一个监听队列。&lt;/p&gt;
&lt;p&gt;(4)使用startAccelerometerUpdatesToQueue方法更新监听队列,并设置回调 函数用于接受加速度通知。在回调函数中使用accelerometerData.acceleration相关 属性可以获取x、y、z各个方向的加速度。&lt;/p&gt;
&lt;h4 id=&quot;2-3频率设置建议&quot;&gt;&lt;a href=&quot;#2-3频率设置建议&quot; class=&quot;headerlink&quot; title=&quot;2.3频率设置建议&quot;&gt;&lt;/a&gt;2.3频率设置建议&lt;/h4&gt;&lt;p&gt;accelerometerUpdateInterval表示通知频率,表示间隔多少秒通知一次。 iPhone开发文档中推荐使用的通知间隔如下:&lt;/p&gt;
&lt;p&gt;(1)检测设备朝向:1/10 ~ 1/20&lt;/p&gt;
&lt;p&gt;(2)在游戏中需要实时使用加速传感器时:1/30 ~ 1/60&lt;/p&gt;
&lt;p&gt;(3)检测敲击设备或者剧烈摇动设备的情况下:1/70 ~ 1/100&lt;/p&gt;
&lt;h3 id=&quot;3-code&quot;&gt;&lt;a href=&quot;#3-code&quot; class=&quot;headerlink&quot; title=&quot;3.code&quot;&gt;&lt;/a&gt;3.code&lt;/h3&gt;&lt;p&gt;相关代码请参考Demo&lt;/p&gt;
&lt;h4 id=&quot;3-1AppDelegate-swift&quot;&gt;&lt;a href=&quot;#3-1AppDelegate-swift&quot; class=&quot;headerlink&quot; title=&quot;3.1AppDelegate.swift&quot;&gt;&lt;/a&gt;3.1AppDelegate.swift&lt;/h4&gt;&lt;p&gt;打开AppDelegate.swift代码窗口,删除class内代码,由于APP中所有用 CoreMotion的对象都需要使用同一个实例,所以需要在AppDelegate中新建Manager, 代码如下。&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Motion&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; Manager = CMMotionManager()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;当然,首先应该导入CoreMotion库。&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;string&quot;&gt; CoreMotion&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;3-2BouncerBehavior&quot;&gt;&lt;a href=&quot;#3-2BouncerBehavior&quot; class=&quot;headerlink&quot; title=&quot;3.2BouncerBehavior.&quot;&gt;&lt;/a&gt;3.2BouncerBehavior.&lt;/h4&gt;&lt;p&gt;在BouncerBehavior.swift中,我们封装了Bouncer需要用到的 UIDynamicBehavior。我们定义了gravity,collider,blockBehavior三个成员变 量,并对后两者进行了lazy init。&lt;/p&gt;
&lt;p&gt;之所以使用lazy init,原因有二:&lt;/p&gt;
&lt;p&gt;一来构造collider的时候有的东西不能使用,二来构造的时候需要设置属性。&lt;/p&gt;
&lt;p&gt; blockBehavior可以改变动力元素的一些属性,如修改allowsRotation属性可以&lt;br&gt;设置元素是否可以旋转,修改elasticity属性决定碰撞是否为弹性碰撞,能量损耗是 多少等等。具体可以参见apple官网的开发者指南。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; gravity = &lt;span class=&quot;type&quot;&gt;UIGravityBehavior&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;lazy&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; collider: &lt;span class=&quot;type&quot;&gt;UICollisionBehavior&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; lazilyCreatedCollider =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;UICollisionBehavior&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lazilyCreatedCollider.translatesReferenceBoundsIntoB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;oundary = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; lazilyCreatedCollider&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;lazy&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; blockBehavior: &lt;span class=&quot;type&quot;&gt;UIDynamicItemBehavior&lt;/span&gt; =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; lazilyCreatedBlockBehavior =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;UIDynamicItemBehavior&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedBlockBehavior.allowsRotation =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedBlockBehavior.elasticity = &lt;span class=&quot;number&quot;&gt;0.85&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedBlockBehavior.friction = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedBlockBehavior.resistance = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; lazilyCreatedBlockBehavior&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在重写的&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;方法中,我们将gravity,collider,blockBehavior加入到当前 行为规则中。同时又添加了addBlock和removeBlock两个封装好的方法,用来添加和 移除遵循行为的对象。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addChildBehavior(gravity)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addChildBehavior(collider)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addChildBehavior(blockBehavior)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;addBlock&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(block: UIView)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dynamicAnimator?.referenceView?.addSubview(block)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        gravity.addItem(block)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        collider.addItem(block)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        blockBehavior.addItem(block)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;removeBlock&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(block: UIView)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        gravity.removeItem(block)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        collider.removeItem(block)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        blockBehavior.removeItem(block)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        block.removeFromSuperview()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;3-3ViewController-swift&quot;&gt;&lt;a href=&quot;#3-3ViewController-swift&quot; class=&quot;headerlink&quot; title=&quot;3.3ViewController.swift&quot;&gt;&lt;/a&gt;3.3ViewController.swift&lt;/h4&gt;&lt;p&gt;在ViewController.swift中我们做如下三件事:&lt;br&gt;首先,建立建立Animation Behavior,并且绑定当前view为UIDynamicAnimator的referenceView。&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; bouncer = BouncerBehavior()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    lazy &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;animator&lt;/span&gt;: UIDynamicAnimator =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; UIDynamicAnimator(&lt;span class=&quot;attribute&quot;&gt;referenceView&lt;/span&gt;: self.view) &amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;其次,在View Controller的生命周期中控制数据采集的开始和结束,并向其中添加对象。&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        animator.addBehavior(bouncer)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidAppear&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(animated: Bool)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidAppear(animated)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; redBlock == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            redBlock = addBlock()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            redBlock?.backgroundColor =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;UIColor&lt;/span&gt;.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            bouncer.addBlock(redBlock!)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; motionManager =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;AppDelegate&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;Motion&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;Manager&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; motionManager.accelerometerAvailable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; motionManager.startAccelerometerUpdatesToQueue(&lt;span class=&quot;type&quot;&gt;NSO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;perationQueue.mainQueue()) &amp;#123; (data, error) -&amp;gt; &lt;span class=&quot;type&quot;&gt;Void&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bouncer.gravity.gravityDirection = &lt;span class=&quot;type&quot;&gt;CGVector&lt;/span&gt;(dx:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data!.acceleration.x, dy: -data!.acceleration.y)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewWillDisappear&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(animated: Bool)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewWillDisappear(animated)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;AppDelegate&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;Motion&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;Manager&lt;/span&gt;.stopAccelerometerUpdates(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后,还要封装addBlock方法,添加视图。&lt;/p&gt;
&lt;figure class=&quot;highlight maxima&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; redBlock: UIView?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    func addBlock() -&amp;gt; UIView &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;block&lt;/span&gt; = UIView(frame: CGRect(&lt;span class=&quot;built_in&quot;&gt;origin&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CGPoint.zero, size: Constants.BlockSize))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;block&lt;/span&gt;.&lt;span class=&quot;built_in&quot;&gt;center&lt;/span&gt; = CGPoint(x: &lt;span class=&quot;built_in&quot;&gt;view&lt;/span&gt;.bounds.midX,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;y: &lt;span class=&quot;built_in&quot;&gt;view&lt;/span&gt;.bounds.midY)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;view&lt;/span&gt;.addSubview(&lt;span class=&quot;built_in&quot;&gt;block&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;block&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;struct Constants &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        static &lt;span class=&quot;built_in&quot;&gt;let&lt;/span&gt; BlockSize = CGSize(&lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;40&lt;/span&gt;) &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;4-运行项目&quot;&gt;&lt;a href=&quot;#4-运行项目&quot; class=&quot;headerlink&quot; title=&quot;4.运行项目&quot;&gt;&lt;/a&gt;4.运行项目&lt;/h3&gt;&lt;p&gt;由于Xcode7之后支持直接进行真机调试而不需 要开发者账号,因此我们将设备与Mac连接后, 在模拟器列表中选择我们的设备,然后点击运 行即可(快捷键 Command + R)。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;p/icture/3-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本教程将介绍如何在应用中使用手势和传感器技术。 相应代码位于&lt;a href=&quot;https://github.com/idup/Bouncer&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Bouncer&lt;/a
    
    </summary>
    
      <category term="iOS技术示例" scheme="http://ios.idup.club/categories/iOS%E6%8A%80%E6%9C%AF%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>Dropit</title>
    <link href="http://ios.idup.club/demo/Dropit/"/>
    <id>http://ios.idup.club/demo/Dropit/</id>
    <published>2015-12-15T15:51:29.000Z</published>
    <updated>2016-03-20T05:51:30.742Z</updated>
    
    <content type="html">&lt;p&gt;本教程将介绍如何在应用中使用动画技术。 相应代码位于&lt;a href=&quot;https://github.com/idup/Dropit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Dropit&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;应用程序界面如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行Xcode并新建一个SingleView项目：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;将项目命名为Dropit并设置好相应参数：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;将项目中的ViewController.swift文件删除并创建用户自定义的控制类，命名为&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在Main.storyboard中将原先ViewController的类设置为DropitViewController&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;拖动一个范型视图进入storyboard，并设置好autolayout&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择show the assistant editor视图模式以同时展示代码与storyboard&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-9.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;将刚拖入的view按住control并拖至代码中&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;再拖入一个手势点击识别器（tap gesture recognizer），并与代码相连&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;打开DropitViewController.swift代码窗口，并在class DropitViewController: UIViewController {} 中添加如下代码来绘制随机小方块&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; dropsPerRow = &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;dropSize&lt;/span&gt;: &lt;span class=&quot;decorator&quot;&gt;CGSize&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt; = gameView.bounds.size.width / CGFloat(dropsPerRow)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; CGSize(&lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func drop()&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; frame = CGRect(&lt;span class=&quot;attribute&quot;&gt;origin&lt;/span&gt;: CGPointZero, &lt;span class=&quot;attribute&quot;&gt;size&lt;/span&gt;: dropSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    frame.origin.x = CGFloat.random(dropsPerRow) * dropSize.width&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; dropView = UIView(&lt;span class=&quot;attribute&quot;&gt;frame&lt;/span&gt;: frame)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dropView.backgroundColor = UIColor.random&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gameView.addSubview(dropView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;override func viewDidLoad() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    animator.addBehavior(gravity)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在class外添加如下代码实现扩展&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;CGFloat&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;max&lt;/span&gt;: Int)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;CGFloat&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;CGFloat&lt;/span&gt;(arc4random() % &lt;span class=&quot;type&quot;&gt;UInt32&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;max&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;UIColor&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;random&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;UIColor&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; arc4random()%&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;UIColor&lt;/span&gt;.greenColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;UIColor&lt;/span&gt;.blueColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;UIColor&lt;/span&gt;.orangeColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;UIColor&lt;/span&gt;.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;UIColor&lt;/span&gt;.purpleColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;UIColor&lt;/span&gt;.blackColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;点击运行，多次点击iPhone模拟器屏幕，查看效果如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-14.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;接下来，在class DropitViewController: UIViewController {} 中添加如下代码来给小方块增加重力下降效果，其中需要使用lazy initialization的方法来初始化animator&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; gravity = &lt;span class=&quot;type&quot;&gt;UIGravityBehavior&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;lazy&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; animator: &lt;span class=&quot;type&quot;&gt;UIDynamicAnimator&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; lazilyCreatedDynamicAnimator = &lt;span class=&quot;type&quot;&gt;UIDynamicAnimator&lt;/span&gt;(referenceView: &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.gameView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; lazilyCreatedDynamicAnimator&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    animator.addBehavior(gravity)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-15.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在drop()方法末尾添加如下代码以增加重力效果：&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;gravity&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.addItem&lt;/span&gt;(&lt;span class=&quot;selector-tag&quot;&gt;dropView&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;点击运行，多次点击iPhone模拟器屏幕，效果如右图。&lt;br&gt;此时，在class DropitViewController: UIViewController {} 中添加如下代码来使小方块不落出屏幕：&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;lazy &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;collider&lt;/span&gt;: UICollisionBehavior = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; lazilyCreatedCollision = UICollisionBehavior()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//configure here&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//edges of reference view are going to be a boundary&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      lazilyCreatedCollision.translatesReferenceBoundsIntooundary = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; lazilyCreatedCollision&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在viewDidLoad()末尾添加如下代码：&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;animator&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.addBehavior&lt;/span&gt;(&lt;span class=&quot;selector-tag&quot;&gt;collider&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在drop()末尾添加如下代码：&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;collider&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.addItem&lt;/span&gt;(&lt;span class=&quot;selector-tag&quot;&gt;dropView&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;点击运行，多次点击iPhone模拟器屏幕，效果如右图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-16.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-17.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;此时创建一个DropitBehavior类，用于统一设置小方块的动画，创建方式如上图，代码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DropitBehavior&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;UIDynamicBehavior&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; gravity = &lt;span class=&quot;type&quot;&gt;UIGravityBehavior&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;lazy&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; collider: &lt;span class=&quot;type&quot;&gt;UICollisionBehavior&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; lazilyCreatedCollision = &lt;span class=&quot;type&quot;&gt;UICollisionBehavior&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedCollision.translatesReferenceBoundsIntoBoundary = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; lazilyCreatedCollision&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addChildBehavior(gravity)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addChildBehavior(collider)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;addDrop&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(drop: UIView)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dynamicAnimator?.referenceView?.addSubview(drop)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        gravity.addItem(drop)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        collider.addItem(drop)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;removeDrop&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(drop: UIView)&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        gravity.removeItem(drop)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        collider.removeItem(drop)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        drop.removeFromSuperview()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在DropitViewController.swift中进行如下修改（红色为修改部分）：&lt;/p&gt;
&lt;figure class=&quot;highlight roboconf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;var dropitBehavior = DropitBehavior()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func drop()&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;attribute&quot;&gt;var frame = CGRect(origin&lt;/span&gt;: CGPointZero, size: dropSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        frame&lt;span class=&quot;variable&quot;&gt;.origin&lt;/span&gt;&lt;span class=&quot;variable&quot;&gt;.x&lt;/span&gt; = CGFloat&lt;span class=&quot;variable&quot;&gt;.random&lt;/span&gt;(dropsPerRow) * dropSize&lt;span class=&quot;variable&quot;&gt;.width&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        let dropView = UIView(frame: frame)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dropView&lt;span class=&quot;variable&quot;&gt;.backgroundColor&lt;/span&gt; = UIColor&lt;span class=&quot;variable&quot;&gt;.random&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        gameView&lt;span class=&quot;variable&quot;&gt;.addSubview&lt;/span&gt;(dropView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dropitBehavior&lt;span class=&quot;variable&quot;&gt;.addDrop&lt;/span&gt;(dropView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; override func viewDidLoad() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super&lt;span class=&quot;variable&quot;&gt;.viewDidLoad&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        animator&lt;span class=&quot;variable&quot;&gt;.addBehavior&lt;/span&gt;(dropitBehavior)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;再次运行，查看结果，与之前相符即可。&lt;/p&gt;
&lt;p&gt;此时在DropitViewController.swift中添加如下代码（红色部分为添加），添加小方块的跳跃程度并设置碰撞后不旋转：&lt;/p&gt;
&lt;figure class=&quot;highlight sqf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;lazy var dropBehavior: UIDynamicItemBehavior = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        let lazilyCreatedDropBehavior = UIDynamicItemBehavior()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedDropBehavior.allowsRotation = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedDropBehavior.elasticity = &lt;span class=&quot;number&quot;&gt;0.75&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return lazilyCreatedDropBehavior&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;override init() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super.init()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addChildBehavior(gravity)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addChildBehavior(collider)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addChildBehavior(dropBehavior)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func addDrop(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;: UIView)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dynamicAnimator?.referenceView?.addSubview(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        gravity.&lt;span class=&quot;built_in&quot;&gt;addItem&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        collider.&lt;span class=&quot;built_in&quot;&gt;addItem&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dropBehavior.&lt;span class=&quot;built_in&quot;&gt;addItem&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func removeDrop(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;: UIView)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        gravity.&lt;span class=&quot;built_in&quot;&gt;removeItem&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        collider.&lt;span class=&quot;built_in&quot;&gt;removeItem&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dropBehavior.&lt;span class=&quot;built_in&quot;&gt;removeItem&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;drop&lt;/span&gt;.removeFromSuperview()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行，小方块碰撞后不再旋转，并且弹跳力增强，结果如右图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-19.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;此时，在DropitViewController.swift中添加如下代码，使得小方块在动画结束后从最底层开始检查，若一层叠满则消除一层（类似俄罗斯方块的效果）：&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fun removeCompletedRow() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; dropsToRemove = [UIView]()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; dropFrame = CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: gameView.frame.maxY, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: dropSize.width, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: dropSize.height)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;decorator&quot;&gt;repeat&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dropFrame.origin.y -= dropSize.height&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dropFrame.origin.x = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; dropsFound = [UIView]()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; rowIsComplete = &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; ..&amp;lt; &lt;span class=&quot;decorator&quot;&gt;dropsPerRow&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; hitView = gameView.hitTest(CGPoint(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: dropFrame.midX, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: dropFrame.midY), &lt;span class=&quot;attribute&quot;&gt;withEvent&lt;/span&gt;: nil) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; hitView.superview == &lt;span class=&quot;decorator&quot;&gt;gameView&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    dropsFound.append(hitView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125; &lt;span class=&quot;decorator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    rowIsComplete = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            dropFrame.origin.x += dropSize.width&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;decorator&quot;&gt;rowIsComplete&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            dropsToRemove += dropsFound&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; dropsToRemove.count == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; dropFrame.origin.y &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; drop &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;decorator&quot;&gt;dropsToRemove&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dropitBehavior.removeDrop(drop)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;给DropitViewController类添加代理方法，使animator成为自己的代理&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DropitViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UIDynamicAnimatorDelegate&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lazy &lt;span class=&quot;variable&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; animator&lt;/span&gt;: UIDynamicAnimator = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        let lazilyCreatedDynamicAnimator = UIDynamicAnimator(referenceView: self.gameView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedDynamicAnimator.delegate = self&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; lazilyCreatedDynamicAnimator&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在DropitViewController.swift中添加如下代码，使动画全部结束后开始进行消除工作：&lt;/p&gt;
&lt;figure class=&quot;highlight crystal&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;dynamicAnimatorDidPause&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;symbol&quot;&gt;animator:&lt;/span&gt; UIDynamicAnimator) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        removeCompletedRow()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在DropitBehavior.swift中将旋转打开&lt;/p&gt;
&lt;figure class=&quot;highlight nix&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;lazy var dropBehavior: &lt;span class=&quot;attr&quot;&gt;UIDynamicItemBehavior&lt;/span&gt; = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;lazilyCreatedDropBehavior&lt;/span&gt; = UIDynamicItemBehavior()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedDropBehavior.&lt;span class=&quot;attr&quot;&gt;allowsRotation&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        lazilyCreatedDropBehavior.&lt;span class=&quot;attr&quot;&gt;elasticity&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0.75&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return lazilyCreatedDropBehavior&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行，并查看结果。&lt;/p&gt;
&lt;p&gt;接下来为界面中心添加一个圆形的障碍物，在DropitBehavior.swift中添加如下代码：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;addBarrier&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(path: UIBezierPath, named name: String)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    collider.removeBoundaryWithIdentifier(name)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    collider.addBoundaryWithIdentifier(name, forPath: path)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-20.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;创建一个BezierPathsView类，用于障碍物的绘制，过程如下：&lt;/p&gt;
&lt;p&gt;BezierPathView的实现：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;BezierPathsView&lt;/span&gt;: &lt;span class=&quot;title&quot;&gt;UIView&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; bezierPaths = [&lt;span class=&quot;type&quot;&gt;String&lt;/span&gt;:&lt;span class=&quot;type&quot;&gt;UIBezierPath&lt;/span&gt;]()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setPath&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(path: UIBezierPath?, named name: String)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bezierPaths[name] = path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        setNeedsDisplay()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;drawRect&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(rect: CGRect)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;number&quot;&gt;_&lt;/span&gt;, path) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; bezierPaths &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            path.stroke()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;切换至storyboard，使gameView继承BezierPathView：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-21.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在DropitViewController.swift中修改如下代码使gameView继承BezierPathView：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; gameView: &lt;span class=&quot;type&quot;&gt;BezierPathsView&lt;/span&gt;!&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在DropitViewController.swift中添加如下代码，绘制连线：&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewDidLayoutSubviews() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLayoutSubviews()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; barrierSize = dropSize&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; barrierOrigin = CGPoint(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: gameView.bounds.midX-barrierSize.width/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: gameView.bounds.midY-barrierSize.height/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; path = UIBezierPath(&lt;span class=&quot;attribute&quot;&gt;ovalInRect&lt;/span&gt;: CGRect(&lt;span class=&quot;attribute&quot;&gt;origin&lt;/span&gt;: barrierOrigin, &lt;span class=&quot;attribute&quot;&gt;size&lt;/span&gt;: barrierSize))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dropitBehavior.addBarrier(path, &lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: PathNames.MiddleBarrier)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gameView.setPath(path, &lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: PathNames.MiddleBarrier)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;lastDroppedView&lt;/span&gt;: UIView?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@IBAction func grabDrop(&lt;span class=&quot;attribute&quot;&gt;sender&lt;/span&gt;: UIPanGestureRecognizer) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; gesturePoint = sender.locationInView(gameView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;decorator&quot;&gt;sender.state&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .Began:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; viewToAttachTo = &lt;span class=&quot;decorator&quot;&gt;lastDroppedView&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            attachment = UIAttachmentBehavior(&lt;span class=&quot;attribute&quot;&gt;item&lt;/span&gt;: viewToAttachTo, &lt;span class=&quot;attribute&quot;&gt;attachedToAnchor&lt;/span&gt;: gesturePoint)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            lastDroppedView = nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .Changed:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        attachment?.anchorPoint = gesturePoint&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; .Ended:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        attachment = nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;default&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;attachment&lt;/span&gt;: UIAttachmentBehavior? &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;decorator&quot;&gt;willSet&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; attachment != &lt;span class=&quot;decorator&quot;&gt;nil&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            animator.removeBehavior(attachment!)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            gameView.setPath(nil, &lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: PathNames.Attachment)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;decorator&quot;&gt;didSet&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; attachment != &lt;span class=&quot;decorator&quot;&gt;nil&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            animator.addBehavior(attachment!)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            attachment?.action = &amp;#123; [unowned self] &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;  &lt;span class=&quot;comment&quot;&gt;//fix memory cycle problem&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; attachedView = self.attachment?.items.first &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? &lt;span class=&quot;decorator&quot;&gt;UIView&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; path = UIBezierPath()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    path.moveToPoint(self.attachment!.anchorPoint)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    path.addLineToPoint(attachedView.center)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    self.gameView.setPath(path, &lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: PathNames.Attachment)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在drop()和PathNames中做如下修改：&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;drop&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; frame = &lt;span class=&quot;type&quot;&gt;CGRect&lt;/span&gt;(origin: &lt;span class=&quot;type&quot;&gt;CGPointZero&lt;/span&gt;, size: dropSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    frame.origin.x = &lt;span class=&quot;type&quot;&gt;CGFloat&lt;/span&gt;.random(dropsPerRow) * dropSize.width&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; dropView = &lt;span class=&quot;type&quot;&gt;UIView&lt;/span&gt;(frame: frame)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dropView.backgroundColor = &lt;span class=&quot;type&quot;&gt;UIColor&lt;/span&gt;.random&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    gameView.addSubview(dropView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    lastDroppedView = dropView&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dropitBehavior.addDrop(dropView)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PathNames&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;MiddleBarrier&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;Middle Barrier&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;Attachment&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;Attachment&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;点击运行，动画小游戏完成&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/4-22.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本教程将介绍如何在应用中使用动画技术。 相应代码位于&lt;a href=&quot;https://github.com/idup/Dropit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Dropit&lt;/a&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="iOS技术示例" scheme="http://ios.idup.club/categories/iOS%E6%8A%80%E6%9C%AF%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>Cassini</title>
    <link href="http://ios.idup.club/demo/Cassini/"/>
    <id>http://ios.idup.club/demo/Cassini/</id>
    <published>2015-12-15T15:51:17.000Z</published>
    <updated>2016-03-20T05:51:26.482Z</updated>
    
    <content type="html">&lt;p&gt;本教程将介绍如何在应用中使用并发编程技术。 相应代码位于&lt;a href=&quot;https://github.com/idup/Cassini&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Cassini&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/1-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-新建项目&quot;&gt;&lt;a href=&quot;#1-新建项目&quot; class=&quot;headerlink&quot; title=&quot;1.新建项目&quot;&gt;&lt;/a&gt;1.新建项目&lt;/h3&gt;&lt;p&gt;运行 Xcode ，选择 File-&amp;gt;New-&amp;gt;Project… (键盘快捷键是 Command + Shift + N )。 在新出现的窗口中,选择左侧iOS部分的 Application ,然后选择右边的 Single View Application (单窗口应用)模板,单击 Next 按钮。&lt;/p&gt;
&lt;p&gt;在文本框 Product Name 中填入 Cassini , 在 Language 弹出式菜单中选择 Swift , 在 Devices 选择 iPhone 。确保标题为 Use Core Data 的选择框未被选中, 点击下一步按钮,单击创建按钮创建项目。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/1-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-拖拽界面&quot;&gt;&lt;a href=&quot;#2-拖拽界面&quot; class=&quot;headerlink&quot; title=&quot;2.拖拽界面&quot;&gt;&lt;/a&gt;2.拖拽界面&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/picture/1-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/1-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/1-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/1-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/1-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/1-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/1-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/picture/2-0.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;3-1-ImageViewController-swift&quot;&gt;&lt;a href=&quot;#3-1-ImageViewController-swift&quot; class=&quot;headerlink&quot; title=&quot;3.1 ImageViewController.swift&quot;&gt;&lt;/a&gt;3.1 ImageViewController.swift&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/picture/2-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;TableViewController主要在点击Cell时，带上Cell.DetailTextLabel.text生成的NSURL对象，并赋值给Segue目标ViewController的属性。&lt;/p&gt;
&lt;h3 id=&quot;3-2-ImageViewController-swift&quot;&gt;&lt;a href=&quot;#3-2-ImageViewController-swift&quot; class=&quot;headerlink&quot; title=&quot;3.2 ImageViewController.swift&quot;&gt;&lt;/a&gt;3.2 ImageViewController.swift&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/picture/2-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;这里是多线程最直观的实现。&lt;br&gt;通过GCD的dispatch_async方法提交一个闭包到global_queue上。&lt;br&gt;通过NSData同步方法(contentsOfUrl: String)获取URL中的数据。&lt;br&gt;同步方法会Block住这个线程，在这个方法未返回时，不会向后执行。&lt;br&gt;获取完数据后，通过GCD相同的方法提交闭包到mian_queue上，设置图片数据并显示。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;本教程将介绍如何在应用中使用并发编程技术。 相应代码位于&lt;a href=&quot;https://github.com/idup/Cassini&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/idup/Cassini&lt;/a&gt;。
    
    </summary>
    
      <category term="iOS技术示例" scheme="http://ios.idup.club/categories/iOS%E6%8A%80%E6%9C%AF%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>一. 创建工程</title>
    <link href="http://ios.idup.club/app/1-Jump-Right-in/"/>
    <id>http://ios.idup.club/app/1-Jump-Right-in/</id>
    <published>2015-12-08T16:19:45.000Z</published>
    <updated>2016-03-20T05:46:24.479Z</updated>
    
    <content type="html">&lt;p&gt;开始开发iOS应用（Start Developing iOS Apps）是学习iPhone和iPad应用开发的起点。&lt;/p&gt;
&lt;h3 id=&quot;关于本课程&quot;&gt;&lt;a href=&quot;#关于本课程&quot; class=&quot;headerlink&quot; title=&quot;关于本课程&quot;&gt;&lt;/a&gt;关于本课程&lt;/h3&gt;&lt;p&gt;通过本课程，你将开发一个简单的饮食追踪应用FoodTracker。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/1-1.png&quot; alt=&quot;FoodTracker App&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;获取工具&quot;&gt;&lt;a href=&quot;#获取工具&quot; class=&quot;headerlink&quot; title=&quot;获取工具&quot;&gt;&lt;/a&gt;获取工具&lt;/h3&gt;&lt;p&gt;用当前最新的技术进行iOS应用开发首先需要相应的软硬件设备，包括一台Mac电脑（安装OS X 10.10或更新版本的操作系统）和最新版本的Xcode。Xcode可免费从App Store下载。&lt;/p&gt;
&lt;h3 id=&quot;创建工程&quot;&gt;&lt;a href=&quot;#创建工程&quot; class=&quot;headerlink&quot; title=&quot;创建工程&quot;&gt;&lt;/a&gt;创建工程&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/1-2.png&quot; alt=&quot;新建工程&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/1-3.png&quot; alt=&quot;选择工程类型&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/1-4.png&quot; alt=&quot;输入工程参数&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/1-5.png&quot; alt=&quot;创建成功&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;开始开发iOS应用（Start Developing iOS Apps）是学习iPhone和iPad应用开发的起点。&lt;/p&gt;
&lt;h3 id=&quot;关于本课程&quot;&gt;&lt;a href=&quot;#关于本课程&quot; class=&quot;headerlink&quot; title=&quot;关于本课程&quot;&gt;&lt;/a&gt;关于本课程
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>二. 创建基本用户界面</title>
    <link href="http://ios.idup.club/app/2-Build-a-basic-UI/"/>
    <id>http://ios.idup.club/app/2-Build-a-basic-UI/</id>
    <published>2015-12-08T03:11:31.000Z</published>
    <updated>2016-03-20T05:46:29.711Z</updated>
    
    <content type="html">&lt;h3 id=&quot;打开Storyboard&quot;&gt;&lt;a href=&quot;#打开Storyboard&quot; class=&quot;headerlink&quot; title=&quot;打开Storyboard&quot;&gt;&lt;/a&gt;打开Storyboard&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/2-1.png&quot; alt=&quot;打开Storyboard&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;添加文本框（Text-Field）&quot;&gt;&lt;a href=&quot;#添加文本框（Text-Field）&quot; class=&quot;headerlink&quot; title=&quot;添加文本框（Text Field）&quot;&gt;&lt;/a&gt;添加文本框（Text Field）&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个文本框到Storyboard的 scene中,重新设置文本框大小。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-2.png&quot; alt=&quot;添加文本框&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;设置文本占位符&quot;&gt;&lt;a href=&quot;#设置文本占位符&quot; class=&quot;headerlink&quot; title=&quot;设置文本占位符&quot;&gt;&lt;/a&gt;设置文本占位符&lt;/h3&gt;&lt;p&gt;打开工具框中的 Attributes inspector，找到Placeholder标签，在其中输入Enter meal name。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-3.png&quot; alt=&quot;设置占位符&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;设置文本框键盘&quot;&gt;&lt;a href=&quot;#设置文本框键盘&quot; class=&quot;headerlink&quot; title=&quot;设置文本框键盘&quot;&gt;&lt;/a&gt;设置文本框键盘&lt;/h3&gt;&lt;p&gt;在Attributes inspector中找到Return Key标签，将其设置为Done,并在Auto-enable Return Key复选框上打上勾。&lt;/p&gt;
&lt;h3 id=&quot;添加标签（Label）&quot;&gt;&lt;a href=&quot;#添加标签（Label）&quot; class=&quot;headerlink&quot; title=&quot;添加标签（Label）&quot;&gt;&lt;/a&gt;添加标签（Label）&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个label到scene中，双击它，在其中输入Meal Name.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-4.png&quot; alt=&quot;添加标签&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;添加按钮（Button）&quot;&gt;&lt;a href=&quot;#添加按钮（Button）&quot; class=&quot;headerlink&quot; title=&quot;添加按钮（Button）&quot;&gt;&lt;/a&gt;添加按钮（Button）&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个button到scene中，双击它，在其中输入Set Default Label Text.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-5.png&quot; alt=&quot;添加按钮&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;自动布局&quot;&gt;&lt;a href=&quot;#自动布局&quot; class=&quot;headerlink&quot; title=&quot;自动布局&quot;&gt;&lt;/a&gt;自动布局&lt;/h3&gt;&lt;p&gt;在按住shift的情况下点击label,button,和textfield.点击canvas底部的Stack按钮&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-6.png&quot; alt=&quot;Stack&quot;&gt;&lt;/p&gt;
&lt;p&gt;Xcode将会将所有UI元素包裹在一个stack view中&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-7.png&quot; alt=&quot;Stack&quot;&gt;&lt;/p&gt;
&lt;p&gt;在canvas的右下角，打开Pin菜单，可以修改界面的布局位置&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-8.png&quot; alt=&quot;Pin&quot;&gt;&lt;/p&gt;
&lt;p&gt;修改完成后&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-9.png&quot; alt=&quot;Pin&quot;&gt;&lt;/p&gt;
&lt;p&gt;需要调整text field的大小，在scene中选择text field,打开Pin菜单，将右边的box中输入0.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-10.png&quot; alt=&quot;Pin&quot;&gt;&lt;/p&gt;
&lt;p&gt;在工具栏中选择Size inspector按钮,将标签Intrinsic Size的属性设置为Placeholder。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-11.png&quot; alt=&quot;size&quot;&gt;&lt;/p&gt;
&lt;p&gt;最终的结果&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-12.png&quot; alt=&quot;ui&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-13.png&quot; alt=&quot;simulator&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;打开Storyboard&quot;&gt;&lt;a href=&quot;#打开Storyboard&quot; class=&quot;headerlink&quot; title=&quot;打开Storyboard&quot;&gt;&lt;/a&gt;打开Storyboard&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/2-1.png&quot; alt
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>三. 连接界面与代码</title>
    <link href="http://ios.idup.club/app/3-Connect-the-UI-to-code/"/>
    <id>http://ios.idup.club/app/3-Connect-the-UI-to-code/</id>
    <published>2015-12-07T03:18:57.000Z</published>
    <updated>2016-03-20T05:46:36.551Z</updated>
    
    <content type="html">&lt;h3 id=&quot;为UI元素创建Outlets&quot;&gt;&lt;a href=&quot;#为UI元素创建Outlets&quot; class=&quot;headerlink&quot; title=&quot;为UI元素创建Outlets&quot;&gt;&lt;/a&gt;为UI元素创建Outlets&lt;/h3&gt;&lt;p&gt;点击toolbar中的Assistant按钮，将assistant editor从Preview状态转换为Automatic状态。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在代码区找到&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在这行下添加标记,这个标记并没有什么用处，主要用来提供一些有用的文本信息&lt;/p&gt;
&lt;figure class=&quot;highlight 1c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Properties&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在storyboard中选择text field,按住control键将它拖拽到代码区刚才添加的标记下面一行&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在出现的对话框中输入nameTextField&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击链接，在代码区出现如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; nameTextField: &lt;span class=&quot;type&quot;&gt;UITextField&lt;/span&gt;!&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以相同方式将label拖拽到代码区&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;定义执行操作&quot;&gt;&lt;a href=&quot;#定义执行操作&quot; class=&quot;headerlink&quot; title=&quot;定义执行操作&quot;&gt;&lt;/a&gt;定义执行操作&lt;/h3&gt;&lt;p&gt;在 ViewController.swift代码区域中，在最后一个 } 前添加&lt;/p&gt;
&lt;figure class=&quot;highlight 1c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Actions&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将Set Default Label Text按钮拖拽至标记下面&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在方法中添加代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setDefaultLabelText&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sender:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   UIButton)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mealNameLabel.text = &lt;span class=&quot;string&quot;&gt;&quot;Default Text&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;标签值被修改&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;获取用户输入&quot;&gt;&lt;a href=&quot;#获取用户输入&quot; class=&quot;headerlink&quot; title=&quot;获取用户输入&quot;&gt;&lt;/a&gt;获取用户输入&lt;/h3&gt;&lt;p&gt;采用UITextFieldDelegate协议，在UIViewController后添加UITextFieldDelegate&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;UITextFieldDelegate &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;设置ViewController作为nameTextField的委托, 对viewDidLoad()修改&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Handle the text field’s user input through delegate callbacks.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nameTextField.delegate = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实现UITextFieldDelegate协议方法textFieldShouldReturn(_:) 和 textFieldDidEndEditing(_:)&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;textFieldShouldReturn&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(textField: UITextField)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Hide the keyboard.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    textField.resignFirstResponder()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight mel&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func textFieldDidEndEditing(&lt;span class=&quot;keyword&quot;&gt;textField&lt;/span&gt;: UITextField) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mealNameLabel.&lt;span class=&quot;keyword&quot;&gt;text&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;textField&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;text&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器查看结果&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;为UI元素创建Outlets&quot;&gt;&lt;a href=&quot;#为UI元素创建Outlets&quot; class=&quot;headerlink&quot; title=&quot;为UI元素创建Outlets&quot;&gt;&lt;/a&gt;为UI元素创建Outlets&lt;/h3&gt;&lt;p&gt;点击toolbar中的Assistant按钮
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>四. 编写视图控制器</title>
    <link href="http://ios.idup.club/app/4-Work-with-view-controllers/"/>
    <id>http://ios.idup.club/app/4-Work-with-view-controllers/</id>
    <published>2015-12-06T03:58:26.000Z</published>
    <updated>2016-03-20T05:46:42.791Z</updated>
    
    <content type="html">&lt;h3 id=&quot;增加一张Meal图片&quot;&gt;&lt;a href=&quot;#增加一张Meal图片&quot; class=&quot;headerlink&quot; title=&quot;增加一张Meal图片&quot;&gt;&lt;/a&gt;增加一张Meal图片&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个 image view放入stack view中的button下面。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在工具栏中选择 Size inspector菜单，将Intrinsic Size标签设置为Placeholder，并将宽度和高度设置为320&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;给图片增加约束条件，Pin菜单中勾选 Aspect Ratio.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt; 在工具栏的Attributes inspector菜单下找到Interaction标签，勾选User Interaction Enabled。&lt;/p&gt;
&lt;h3 id=&quot;展示默认图片&quot;&gt;&lt;a href=&quot;#展示默认图片&quot; class=&quot;headerlink&quot; title=&quot;展示默认图片&quot;&gt;&lt;/a&gt;展示默认图片&lt;/h3&gt;&lt;p&gt;在project navigator中选择Assets.xcassets。在左底角点击+符号，把图片拖入image set中的2*槽中，Attributes inspector中选择image，在列表中选择刚才添加的图片defaultPhoto。运行模拟器。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;连接代码与图片&quot;&gt;&lt;a href=&quot;#连接代码与图片&quot; class=&quot;headerlink&quot; title=&quot;连接代码与图片&quot;&gt;&lt;/a&gt;连接代码与图片&lt;/h3&gt;&lt;p&gt;拖拽image view到ViewController.swift代码区，name为photoImageView&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;创建手势识别&quot;&gt;&lt;a href=&quot;#创建手势识别&quot; class=&quot;headerlink&quot; title=&quot;创建手势识别&quot;&gt;&lt;/a&gt;创建手势识别&lt;/h3&gt;&lt;p&gt;从Object Library中拖拽一个Object Library，将其放在image view上添加一个点击手势识别。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;将手势识别连接到代码区&quot;&gt;&lt;a href=&quot;#将手势识别连接到代码区&quot; class=&quot;headerlink&quot; title=&quot;将手势识别连接到代码区&quot;&gt;&lt;/a&gt;将手势识别连接到代码区&lt;/h3&gt;&lt;p&gt;拖拽 gesture recognizer到ViewController.swift代码区，name设置为selectImageFromPhotoLibrary，type设置为UITapGestureRecognizer&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;创建图像选择器来响应用户点击&quot;&gt;&lt;a href=&quot;#创建图像选择器来响应用户点击&quot; class=&quot;headerlink&quot; title=&quot;创建图像选择器来响应用户点击&quot;&gt;&lt;/a&gt;创建图像选择器来响应用户点击&lt;/h3&gt;&lt;p&gt;在ViewController.swift代码区中修改相应代码&lt;br&gt;&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UITextFieldDelegate&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UIImagePickerControllerDelegate&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UINavigationControllerDelegate &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;修改 selectImageFromPhotoLibrary(_:)方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;selectImageFromPhotoLibrary&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sender: UITapGestureRecognizer)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Hide the keyboard.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nameTextField.resignFirstResponder()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// UIImagePickerController is a view controller that lets a user pick media from their photo library.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; imagePickerController = &lt;span class=&quot;type&quot;&gt;UIImagePickerController&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Only allow photos to be picked, not taken.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePickerController.sourceType = .&lt;span class=&quot;type&quot;&gt;PhotoLibrary&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Make sure ViewController is notified when the user picks an image.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePickerController.delegate = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    presentViewController(imagePickerController, animated: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实现两个委托方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;imagePickerControllerDidCancel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(picker: UIImagePickerController)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;imagePickerController&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject])&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;imagePickerControllerDidCancel(_:) 方法内容&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;imagePickerControllerDidCancel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(picker: UIImagePickerController)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Dismiss the picker if the user canceled.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dismissViewControllerAnimated(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;imagePickerController(_:didFinishPickingMediaWithInfo) 方法内容&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;imagePickerController&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject])&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// The info dictionary contains multiple representations of the image, and this uses the original.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedImage = info[&lt;span class=&quot;type&quot;&gt;UIImagePickerControllerOriginalImage&lt;/span&gt;] &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;type&quot;&gt;UIImage&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Set photoImageView to display the selected image.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    photoImageView.image = selectedImage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Dismiss the picker.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dismissViewControllerAnimated(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从电脑中向模拟器中拖拽图片，图片就会被添加进模拟器中&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击image view,选择向模拟器中添加的图片&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;增加一张Meal图片&quot;&gt;&lt;a href=&quot;#增加一张Meal图片&quot; class=&quot;headerlink&quot; title=&quot;增加一张Meal图片&quot;&gt;&lt;/a&gt;增加一张Meal图片&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个 image view放入stack
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>五. 实现自定义控件</title>
    <link href="http://ios.idup.club/app/5-Implement-a-custom-control/"/>
    <id>http://ios.idup.club/app/5-Implement-a-custom-control/</id>
    <published>2015-12-05T03:58:40.000Z</published>
    <updated>2016-03-20T05:46:53.291Z</updated>
    
    <content type="html">&lt;h3 id=&quot;创建自定义视图&quot;&gt;&lt;a href=&quot;#创建自定义视图&quot; class=&quot;headerlink&quot; title=&quot;创建自定义视图&quot;&gt;&lt;/a&gt;创建自定义视图&lt;/h3&gt;&lt;p&gt;点击File &amp;gt; New &amp;gt; File ，选择ios下的source选项，选择Cocoa Touch Class，点击next，Class设置为RatingControl，“Subclass of”选择UIView,Language选择Swift&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在RatingControl.swift代码区的class里添加代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;required&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;?(coder aDecoder: &lt;span class=&quot;type&quot;&gt;NSCoder&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(coder: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;显示自定义视图&quot;&gt;&lt;a href=&quot;#显示自定义视图&quot; class=&quot;headerlink&quot; title=&quot;显示自定义视图&quot;&gt;&lt;/a&gt;显示自定义视图&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个View,将其放置在image view下面，打开它的Size inspector，Intrinsic Size标签设置为Placeholder，宽和高分别设置为44和240,打开它的 Identity inspector，class标签选择RatingControl.&lt;/p&gt;
&lt;h3 id=&quot;向视图添加button按钮&quot;&gt;&lt;a href=&quot;#向视图添加button按钮&quot; class=&quot;headerlink&quot; title=&quot;向视图添加button按钮&quot;&gt;&lt;/a&gt;向视图添加button按钮&lt;/h3&gt;&lt;p&gt;在RatingControl.swift代码区添加如下代码，用于创建一个红色按钮&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.init(&lt;span class=&quot;attribute&quot;&gt;coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton(&lt;span class=&quot;attribute&quot;&gt;frame&lt;/span&gt;: CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    button.backgroundColor = UIColor.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;调整红色按钮的布局，重写intrinsicContentSize方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;intrinsicContentSize&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;CGSize&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;CGSize&lt;/span&gt;(width: &lt;span class=&quot;number&quot;&gt;240&lt;/span&gt;, height: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;为了向button按钮添加动作，在 RatingControl.swift代码区最后一个 } 前添加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Button Action&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ratingButtonTapped&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(button: UIButton)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Button pressed 👍&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改init?(coder:)函数如下&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.init(&lt;span class=&quot;attribute&quot;&gt;coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton(&lt;span class=&quot;attribute&quot;&gt;frame&lt;/span&gt;: CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    button.backgroundColor = UIColor.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    button.addTarget(self, &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ratingButtonTapped:&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;forControlEvents&lt;/span&gt;: .TouchDown)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;定义属性和5个button，重写layoutSubviews()方法&lt;/p&gt;
&lt;figure class=&quot;highlight http&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;super.init(coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;qml&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;.&amp;lt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton(&lt;span class=&quot;attribute&quot;&gt;frame&lt;/span&gt;: CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       button.backgroundColor = UIColor.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       button.addTarget(self, &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ratingButtonTapped:&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;forControlEvents&lt;/span&gt;: .TouchDown)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       ratingButtons += [button]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   override func layoutSubviews() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; buttonFrame = CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;comment&quot;&gt;// Offset each button&#39;s origin by the length of the button plus spacing.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (index, button) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ratingButtons.enumerate() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           buttonFrame.origin.x = CGFloat(index * (&lt;span class=&quot;number&quot;&gt;44&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           button.frame = buttonFrame&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;为button大小声明约束-相应代码修改如下&quot;&gt;&lt;a href=&quot;#为button大小声明约束-相应代码修改如下&quot; class=&quot;headerlink&quot; title=&quot;为button大小声明约束,相应代码修改如下&quot;&gt;&lt;/a&gt;为button大小声明约束,相应代码修改如下&lt;/h3&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;layoutSubviews&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Set the button&#39;s width and height to a square the size of the frame&#39;s height.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; buttonSize = &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;(frame.size.height)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; buttonFrame = &lt;span class=&quot;type&quot;&gt;CGRect&lt;/span&gt;(x: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, y: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, width: buttonSize, height: buttonSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Offset each button&#39;s origin by the length of the button plus some spacing.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (index, button) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ratingButtons.&lt;span class=&quot;built_in&quot;&gt;enumerate&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buttonFrame.origin.x = &lt;span class=&quot;type&quot;&gt;CGFloat&lt;/span&gt;(index * (buttonSize + &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.frame = buttonFrame&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight maxima&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func intrinsicContentSize() -&amp;gt; CGSize &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;let&lt;/span&gt; buttonSize = Int(frame.size.&lt;span class=&quot;built_in&quot;&gt;height&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt; = (buttonSize + spacing) * stars&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;return&lt;/span&gt; CGSize(&lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;height&lt;/span&gt;: buttonSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.init(&lt;span class=&quot;attribute&quot;&gt;coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;.&amp;lt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.backgroundColor = UIColor.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.addTarget(self, &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ratingButtonTapped:&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;forControlEvents&lt;/span&gt;: .TouchDown)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ratingButtons += [button]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;向Buttons中添加star图片&quot;&gt;&lt;a href=&quot;#向Buttons中添加star图片&quot; class=&quot;headerlink&quot; title=&quot;向Buttons中添加star图片&quot;&gt;&lt;/a&gt;向Buttons中添加star图片&lt;/h3&gt;&lt;p&gt;在project navigator中选择Assets.xcassets,点击(+)按钮并创建一个文件夹，将文件夹命名Rating Images。在这个文件夹下创建两个Image Set，分别命名为emptyStar， filledStar，并将图片拖拽到相应位置&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;为buttons设置成星星图片，修改RatingControl.swift中代码&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.init(&lt;span class=&quot;attribute&quot;&gt;coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; emptyStarImage = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;emptyStar&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; filledStarImage = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;filledStar&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;.&amp;lt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.setImage(emptyStarImage, &lt;span class=&quot;attribute&quot;&gt;forState&lt;/span&gt;: .Normal)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.setImage(filledStarImage, &lt;span class=&quot;attribute&quot;&gt;forState&lt;/span&gt;: .Selected)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.setImage(filledStarImage, &lt;span class=&quot;attribute&quot;&gt;forState&lt;/span&gt;: [.Highlighted, .Selected])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.adjustsImageWhenHighlighted = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.addTarget(self, &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ratingButtonTapped:&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;forControlEvents&lt;/span&gt;: .TouchDown)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ratingButtons += [button]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;实现Button动作&quot;&gt;&lt;a href=&quot;#实现Button动作&quot; class=&quot;headerlink&quot; title=&quot;实现Button动作&quot;&gt;&lt;/a&gt;实现Button动作&lt;/h3&gt;&lt;p&gt;用户需要点击星星图标来作出选择，需要重新设计rratingButtonTapped(_:)方法&lt;/p&gt;
&lt;p&gt;在RatingControl.swift代码区域添加updateButtonSelectionStates()方法&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func updateButtonSelectionStates() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (index, button) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ratingButtons.enumerate() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// If the index of a button is less than the rating, that button shouldn&#39;t be selected.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;selector-tag&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.selected&lt;/span&gt; = index &amp;lt; rating&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在ratingButtonTapped(_:)方法和layoutSubviews()中分别调用这个方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ratingButtonTapped&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(button: UIButton)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rating = ratingButtons.indexOf(button)! + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    updateButtonSelectionStates()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;layoutSubviews&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Set the button&#39;s width and height to a square the size of the frame&#39;s height.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; buttonSize = &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;(frame.size.height)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; buttonFrame = &lt;span class=&quot;type&quot;&gt;CGRect&lt;/span&gt;(x: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, y: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, width: buttonSize, height: buttonSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Offset each button&#39;s origin by the length of the button plus some spacing.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (index, button) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ratingButtons.&lt;span class=&quot;built_in&quot;&gt;enumerate&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buttonFrame.origin.x = &lt;span class=&quot;type&quot;&gt;CGFloat&lt;/span&gt;(index * (buttonSize + &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.frame = buttonFrame&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    updateButtonSelectionStates()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在// MARK: Properties区域下，更新rating属性&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; rating&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;didSet &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    setNeedsLayout()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;增加Spacing和Number属性&quot;&gt;&lt;a href=&quot;#增加Spacing和Number属性&quot; class=&quot;headerlink&quot; title=&quot;增加Spacing和Number属性&quot;&gt;&lt;/a&gt;增加Spacing和Number属性&lt;/h3&gt;&lt;p&gt;在// MARK: Properties下增加两个属性,&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; spacing&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; stars&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;将比率控制和视图控制器建立连接&quot;&gt;&lt;a href=&quot;#将比率控制和视图控制器建立连接&quot; class=&quot;headerlink&quot; title=&quot;将比率控制和视图控制器建立连接&quot;&gt;&lt;/a&gt;将比率控制和视图控制器建立连接&lt;/h3&gt;&lt;p&gt;将canvas中的rating control拖拽至 ViewController.swift中photoImageView 属性下&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;设置如图&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;清理工程项目&quot;&gt;&lt;a href=&quot;#清理工程项目&quot; class=&quot;headerlink&quot; title=&quot;清理工程项目&quot;&gt;&lt;/a&gt;清理工程项目&lt;/h3&gt;&lt;p&gt;现在快要完成app的设计了，但是现在需要对之前的工作做一个清理，因为app实现了更高级的功能，而之前的功能我们需要删除一些。&lt;/p&gt;
&lt;p&gt;选择Storyboard 中的Set Default Label Text 按钮，按下 Delete键去删除它&lt;/p&gt;
&lt;p&gt;点击outline目录下的Stack View对象，打开Attributes inspector.找到Alignment标签，将其设置为Center，stack view中的元素就会水平居中&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;打开ViewController.swift，删除setDefaultLabelText(_:)方法&lt;/p&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;创建自定义视图&quot;&gt;&lt;a href=&quot;#创建自定义视图&quot; class=&quot;headerlink&quot; title=&quot;创建自定义视图&quot;&gt;&lt;/a&gt;创建自定义视图&lt;/h3&gt;&lt;p&gt;点击File &amp;gt; New &amp;gt; File ，选择ios下的source选项，选择Cocoa
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>六. 定义数据模型</title>
    <link href="http://ios.idup.club/app/6-Define-your-data-model/"/>
    <id>http://ios.idup.club/app/6-Define-your-data-model/</id>
    <published>2015-12-04T03:58:51.000Z</published>
    <updated>2016-03-20T05:47:01.187Z</updated>
    
    <content type="html">&lt;h3 id=&quot;创建数据模型&quot;&gt;&lt;a href=&quot;#创建数据模型&quot; class=&quot;headerlink&quot; title=&quot;创建数据模型&quot;&gt;&lt;/a&gt;创建数据模型&lt;/h3&gt;&lt;p&gt;现在需要创建一个数据模型去存储 meal scene呈现的信息&lt;/p&gt;
&lt;h5 id=&quot;创建一个简单的数据模型类&quot;&gt;&lt;a href=&quot;#创建一个简单的数据模型类&quot; class=&quot;headerlink&quot; title=&quot;创建一个简单的数据模型类&quot;&gt;&lt;/a&gt;创建一个简单的数据模型类&lt;/h5&gt;&lt;p&gt;依次点击File &amp;gt; New &amp;gt; File，选择ios下的source选项，选择Swift File,点击next，相关配置如下，点击完成，就创建了一个名为Meal.swift的文件&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/6-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;为meal定义一个数据模型&quot;&gt;&lt;a href=&quot;#为meal定义一个数据模型&quot; class=&quot;headerlink&quot; title=&quot;为meal定义一个数据模型&quot;&gt;&lt;/a&gt;为meal定义一个数据模型&lt;/h5&gt;&lt;p&gt;打开Meal.swift.将import Foundation改为import UIKit&lt;/p&gt;
&lt;p&gt;在import声明下，添加如下代码&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class &lt;span class=&quot;decorator&quot;&gt;Meal&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// MARK: Properties&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: UIImage?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: Int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Initialization&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;init?(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: UIImage?, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: Int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Initialize stored properties.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.name = name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.photo = photo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.rating = rating&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Initialization should fail if there is no name or if the rating is negative.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; name.isEmpty || rating &amp;lt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;测试数据&quot;&gt;&lt;a href=&quot;#测试数据&quot; class=&quot;headerlink&quot; title=&quot;测试数据&quot;&gt;&lt;/a&gt;测试数据&lt;/h3&gt;&lt;p&gt;定义了数据模型，还没有完全并入你的app,你也不能保证所有的实现都是正确的，这时就可以通过单元测试来检验代码的正确性。&lt;/p&gt;
&lt;h5 id=&quot;查看单元测试文件&quot;&gt;&lt;a href=&quot;#查看单元测试文件&quot; class=&quot;headerlink&quot; title=&quot;查看单元测试文件&quot;&gt;&lt;/a&gt;查看单元测试文件&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;/images/6-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;编写单元测试&quot;&gt;&lt;a href=&quot;#编写单元测试&quot; class=&quot;headerlink&quot; title=&quot;编写单元测试&quot;&gt;&lt;/a&gt;编写单元测试&lt;/h5&gt;&lt;p&gt;打开FoodTrackerTests.swift文件，删除模板测试代码，修改为如下测试代码&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Tests to confirm that the Meal initializer returns when no name or a negative rating is provided.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func testMealInitialization() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Success case.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; potentialItem = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Newest meal&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: nil, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    XCTAssertNotNil(potentialItem)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Failure cases.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; noName = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: nil, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    XCTAssertNil(noName, &lt;span class=&quot;string&quot;&gt;&quot;Empty name is invalid&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; badRating = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Really bad rating&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: nil, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    XCTAssertNotNil(badRating)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;运行testMealInitialization-单元测试&quot;&gt;&lt;a href=&quot;#运行testMealInitialization-单元测试&quot; class=&quot;headerlink&quot; title=&quot;运行testMealInitialization() 单元测试&quot;&gt;&lt;/a&gt;运行testMealInitialization() 单元测试&lt;/h5&gt;&lt;p&gt;在FoodTrackerTests.swift文件中找到testMealInitialization()单元，在测试名字左边找到一个棱形形状的标签，点击标签运行单元测试。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/6-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;修改测试案例&quot;&gt;&lt;a href=&quot;#修改测试案例&quot; class=&quot;headerlink&quot; title=&quot;修改测试案例&quot;&gt;&lt;/a&gt;修改测试案例&lt;/h5&gt;&lt;p&gt;找到testMealInitialization()的最后一行，修改为&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;XCTAssertNil&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(badRating, &lt;span class=&quot;string&quot;&gt;&quot;Negative ratings are invalid, be positive&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重新运行，所有样例都能测试通过&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/6-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;创建数据模型&quot;&gt;&lt;a href=&quot;#创建数据模型&quot; class=&quot;headerlink&quot; title=&quot;创建数据模型&quot;&gt;&lt;/a&gt;创建数据模型&lt;/h3&gt;&lt;p&gt;现在需要创建一个数据模型去存储 meal scene呈现的信息&lt;/p&gt;
&lt;h5 id=&quot;创建一个简单的数据模
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>七. 创建表视图</title>
    <link href="http://ios.idup.club/app/7-Create-a-table-view/"/>
    <id>http://ios.idup.club/app/7-Create-a-table-view/</id>
    <published>2015-12-03T03:59:11.000Z</published>
    <updated>2016-03-20T05:47:06.515Z</updated>
    
    <content type="html">&lt;h3 id=&quot;创建开放视图&quot;&gt;&lt;a href=&quot;#创建开放视图&quot; class=&quot;headerlink&quot; title=&quot;创建开放视图&quot;&gt;&lt;/a&gt;创建开放视图&lt;/h3&gt;&lt;p&gt;目前，FoodTracker app只有一个通过view controller管理的视图，还需要创建meals的列表，IOS内置了表视图类UITableView来展示这种项目滑动列表&lt;/p&gt;
&lt;h5 id=&quot;在storyboard中添加一个表视图&quot;&gt;&lt;a href=&quot;#在storyboard中添加一个表视图&quot; class=&quot;headerlink&quot; title=&quot;在storyboard中添加一个表视图&quot;&gt;&lt;/a&gt;在storyboard中添加一个表视图&lt;/h5&gt;&lt;p&gt;在Object libray中找到Table View Controller对象，拖拽它把它放置在meal视图的左边，这时就有两个视图，一个用来用来添加meal，一个用来展示meal 列表&lt;/p&gt;
&lt;h5 id=&quot;将table-view-controller设置为初始视图&quot;&gt;&lt;a href=&quot;#将table-view-controller设置为初始视图&quot; class=&quot;headerlink&quot; title=&quot;将table view controller设置为初始视图&quot;&gt;&lt;/a&gt;将table view controller设置为初始视图&lt;/h5&gt;&lt;p&gt;拖拽指向view Controller的箭头，将它指向table view controller&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行虚拟机&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;配置table-view&quot;&gt;&lt;a href=&quot;#配置table-view&quot; class=&quot;headerlink&quot; title=&quot;配置table view&quot;&gt;&lt;/a&gt;配置table view&lt;/h5&gt;&lt;p&gt;在 outline view中选择Table View，打开Size inspector,找到Row Height标签，设置为90&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;设计自定义的表单元&quot;&gt;&lt;a href=&quot;#设计自定义的表单元&quot; class=&quot;headerlink&quot; title=&quot;设计自定义的表单元&quot;&gt;&lt;/a&gt;设计自定义的表单元&lt;/h3&gt;&lt;h5 id=&quot;创建UITableViewCell的子类&quot;&gt;&lt;a href=&quot;#创建UITableViewCell的子类&quot; class=&quot;headerlink&quot; title=&quot;创建UITableViewCell的子类&quot;&gt;&lt;/a&gt;创建UITableViewCell的子类&lt;/h5&gt;&lt;p&gt;依次点击File &amp;gt; New &amp;gt; File ，选择ios下面的Source选项，选择 Cocoa Touch Class，点击next，Class中填入Meal,subclass of中选择UITableViewCell，然后一只默认设置到创建结束。&lt;/p&gt;
&lt;h5 id=&quot;为table-view配置自定义单元&quot;&gt;&lt;a href=&quot;#为table-view配置自定义单元&quot; class=&quot;headerlink&quot; title=&quot;为table view配置自定义单元&quot;&gt;&lt;/a&gt;为table view配置自定义单元&lt;/h5&gt;&lt;p&gt;在outline中选择Table View Cell，打开它的Attributes inspector，找到 Identifier标签，输入MealTableViewCell。找到 Selection标签，选择None，打开 Size inspector，找到Row Height标签，输入90，打开Identity inspector，在Class标签中选择 MealTableViewCell.&lt;/p&gt;
&lt;h5 id=&quot;为自定义的table单元设计接口&quot;&gt;&lt;a href=&quot;#为自定义的table单元设计接口&quot; class=&quot;headerlink&quot; title=&quot;为自定义的table单元设计接口&quot;&gt;&lt;/a&gt;为自定义的table单元设计接口&lt;/h5&gt;&lt;p&gt;依次点击 Editor &amp;gt; Canvas &amp;gt; Show Bounds Rectangles，&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在Object library中选择Image View，拖拽它到表单元&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;打开image view的 Attributes inspector,选择 Image标签设置为defaultPhoto，在Object library中选择Label，拖拽它到表单元，挡在image view的右边&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;重新设置label的大小&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从Object library中选择View ，拖拽到表单元，打开它的Size inspector,设置 Height和Width 分别为40，240，打开它的Identity inspector，设置 Class为RatingControl。打开Attributes inspector，找到 Interaction标签，撤销User Interaction Enabled&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行虚拟机&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;向项目中添加图片&quot;&gt;&lt;a href=&quot;#向项目中添加图片&quot; class=&quot;headerlink&quot; title=&quot;向项目中添加图片&quot;&gt;&lt;/a&gt;向项目中添加图片&lt;/h3&gt;&lt;p&gt;打开 project navigator中的Assets.xcassets，添加一个文件夹，命名为Sample Images，在这个文件夹下添加New Image Set ，向其中添加图片。可以新建多个New Image Set。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;table单元和代码建立连接&quot;&gt;&lt;a href=&quot;#table单元和代码建立连接&quot; class=&quot;headerlink&quot; title=&quot;table单元和代码建立连接&quot;&gt;&lt;/a&gt;table单元和代码建立连接&lt;/h3&gt;&lt;h5 id=&quot;建立视图和MealTableViewCell-swift代码的连接&quot;&gt;&lt;a href=&quot;#建立视图和MealTableViewCell-swift代码的连接&quot; class=&quot;headerlink&quot; title=&quot;建立视图和MealTableViewCell.swift代码的连接&quot;&gt;&lt;/a&gt;建立视图和MealTableViewCell.swift代码的连接&lt;/h5&gt;&lt;p&gt;拖拽table 单元中的label到MealTableViewCell.swift的代码区，name 设置为nameLabel&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-14.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;拖拽table单元中的image view到 MealTableViewCell.swift代码区，位置放在刚刚建立的nameLabel属性下面，name设置为photoImageView&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-15.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择table view单元中的rating control，拖拽它到MealTableViewCell.swift代码区的photoImageView属性下。name设置为ratingControl&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-16.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-17.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;加载初始数据&quot;&gt;&lt;a href=&quot;#加载初始数据&quot; class=&quot;headerlink&quot; title=&quot;加载初始数据&quot;&gt;&lt;/a&gt;加载初始数据&lt;/h3&gt;&lt;h5 id=&quot;创建UITableViewController的子类&quot;&gt;&lt;a href=&quot;#创建UITableViewController的子类&quot; class=&quot;headerlink&quot; title=&quot;创建UITableViewController的子类&quot;&gt;&lt;/a&gt;创建UITableViewController的子类&lt;/h5&gt;&lt;p&gt;依次点击File &amp;gt; New &amp;gt; File，选择ios下的Source选项，选择Cocoa Touch Class，点击next,Class填入Meal,subclass of填入UITableViewController，确保Also create XIB file设置为unselected状态，点击创建。&lt;/p&gt;
&lt;h5 id=&quot;加载初始数据-1&quot;&gt;&lt;a href=&quot;#加载初始数据-1&quot; class=&quot;headerlink&quot; title=&quot;加载初始数据&quot;&gt;&lt;/a&gt;加载初始数据&lt;/h5&gt;&lt;p&gt;在 MealTableViewController.swift代码区的class行下面添加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// MARK: Properties&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var meals = [&lt;span class=&quot;string&quot;&gt;Meal&lt;/span&gt;](&lt;span class=&quot;link&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在viewDidLoad() 方法后面，添加如下方法&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func loadSampleMeals() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo1 = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;meal1&quot;&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; meal1 = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Caprese Salad&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo1, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo2 = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;meal2&quot;&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; meal2 = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Chicken and Potatoes&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo2, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo3 = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;meal3&quot;&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; meal3 = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Pasta with Meatballs&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo3, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    meals += [meal1, meal2, meal3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;viewDidLoad()方法添加相关代码加载数据&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Load the sample data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    loadSampleMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;呈现数据&quot;&gt;&lt;a href=&quot;#呈现数据&quot; class=&quot;headerlink&quot; title=&quot;呈现数据&quot;&gt;&lt;/a&gt;呈现数据&lt;/h3&gt;&lt;h5 id=&quot;呈现table-view的部分&quot;&gt;&lt;a href=&quot;#呈现table-view的部分&quot; class=&quot;headerlink&quot; title=&quot;呈现table view的部分&quot;&gt;&lt;/a&gt;呈现table view的部分&lt;/h5&gt;&lt;p&gt;修改MealTableViewController.swift代码中numberOfSectionsInTableView(_:)方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(tableView: UITableView, numberOfRowsInSection section: Int)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; meals.&lt;span class=&quot;built_in&quot;&gt;count&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;配置并呈现table-view中的单元&quot;&gt;&lt;a href=&quot;#配置并呈现table-view中的单元&quot; class=&quot;headerlink&quot; title=&quot;配置并呈现table view中的单元&quot;&gt;&lt;/a&gt;配置并呈现table view中的单元&lt;/h5&gt;&lt;p&gt;找到tableviewf方法将其改成如下形式&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&amp;gt; UITableViewCell &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Table view cells are reused and should be dequeued using a cell identifier.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let cellIdentifier = &lt;span class=&quot;string&quot;&gt;&quot;MealTableViewCell&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let cell = tableView.dequeueReusableCellWithIdentifier(cellIdentifier, forIndexPath: indexPath) as! MealTableViewCell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Fetches the appropriate meal for the data source layout.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let meal = meals[indexPath.row]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cell&lt;span class=&quot;selector-class&quot;&gt;.nameLabel&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.text&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cell&lt;span class=&quot;selector-class&quot;&gt;.photoImageView&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.image&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.photo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cell&lt;span class=&quot;selector-class&quot;&gt;.ratingControl&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.rating&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.rating&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return cell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;将table-view-controller-scene指向MealTableViewController-swift&quot;&gt;&lt;a href=&quot;#将table-view-controller-scene指向MealTableViewController-swift&quot; class=&quot;headerlink&quot; title=&quot;将table view controller scene指向MealTableViewController.swift&quot;&gt;&lt;/a&gt;将table view controller scene指向MealTableViewController.swift&lt;/h5&gt;&lt;p&gt;点击view controller的scene dock,打开Identity inspector，class标签选择MealTableViewController.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-18.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;准备导航视图&quot;&gt;&lt;a href=&quot;#准备导航视图&quot; class=&quot;headerlink&quot; title=&quot;准备导航视图&quot;&gt;&lt;/a&gt;准备导航视图&lt;/h3&gt;&lt;h5 id=&quot;清理工程中无用的项目&quot;&gt;&lt;a href=&quot;#清理工程中无用的项目&quot; class=&quot;headerlink&quot; title=&quot;清理工程中无用的项目&quot;&gt;&lt;/a&gt;清理工程中无用的项目&lt;/h5&gt;&lt;p&gt;选择Meal Name 标签，并删除它&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-19.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-20.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;打开ViewController.swift，找到 textFieldDidEndEditing(_:)方法，删除方法中的如下代码&lt;br&gt;&lt;figure class=&quot;highlight mel&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mealNameLabel.&lt;span class=&quot;keyword&quot;&gt;text&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;textField&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;text&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;删除ViewController.swift中的&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; mealNameLabel: &lt;span class=&quot;type&quot;&gt;UILabel&lt;/span&gt;!&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;重命名ViewController-swift文件&quot;&gt;&lt;a href=&quot;#重命名ViewController-swift文件&quot; class=&quot;headerlink&quot; title=&quot;重命名ViewController.swift文件&quot;&gt;&lt;/a&gt;重命名ViewController.swift文件&lt;/h5&gt;&lt;p&gt;点击ViewController.swift，重命名为MealViewController.swift，将代码区的类声明作如下修改&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;MealViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UITextFieldDelegate&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UIImagePickerControllerDelegate&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UINavigationControllerDelegate &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在文件的上面部分将ViewController.swift 改为MealViewController.swift.&lt;/p&gt;
&lt;p&gt;点击meal secen的scene dock，打开Identity inspector，将class改为MealViewController&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;创建开放视图&quot;&gt;&lt;a href=&quot;#创建开放视图&quot; class=&quot;headerlink&quot; title=&quot;创建开放视图&quot;&gt;&lt;/a&gt;创建开放视图&lt;/h3&gt;&lt;p&gt;目前，FoodTracker app只有一个通过view controller管理的视图，还需要创建meal
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>八. 实现导航</title>
    <link href="http://ios.idup.club/app/8-Implement-navigation/"/>
    <id>http://ios.idup.club/app/8-Implement-navigation/</id>
    <published>2015-12-02T03:59:23.000Z</published>
    <updated>2016-03-20T05:47:11.976Z</updated>
    
    <content type="html">&lt;h3 id=&quot;添加一个向前导航&quot;&gt;&lt;a href=&quot;#添加一个向前导航&quot; class=&quot;headerlink&quot; title=&quot;添加一个向前导航&quot;&gt;&lt;/a&gt;添加一个向前导航&lt;/h3&gt;&lt;p&gt;现在需要添加meal list到meal scene的导航&lt;/p&gt;
&lt;h5 id=&quot;增加一个navigation-controller指向meal-list-scene&quot;&gt;&lt;a href=&quot;#增加一个navigation-controller指向meal-list-scene&quot; class=&quot;headerlink&quot; title=&quot;增加一个navigation controller指向meal list scene&quot;&gt;&lt;/a&gt;增加一个navigation controller指向meal list scene&lt;/h5&gt;&lt;p&gt;打开storyboard，点击scene dock来选择table view controller,保持选择状态依次点击Editor &amp;gt; Embed In &amp;gt; Navigation Controller.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;为视图添加导航栏&quot;&gt;&lt;a href=&quot;#为视图添加导航栏&quot; class=&quot;headerlink&quot; title=&quot;为视图添加导航栏&quot;&gt;&lt;/a&gt;为视图添加导航栏&lt;/h3&gt;&lt;h5 id=&quot;为meal-list配置导航栏&quot;&gt;&lt;a href=&quot;#为meal-list配置导航栏&quot; class=&quot;headerlink&quot; title=&quot;为meal list配置导航栏&quot;&gt;&lt;/a&gt;为meal list配置导航栏&lt;/h5&gt;&lt;p&gt;双击meal list scene的 navigation bar，输入Your meals&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从Object library中选择Bar Button Item，拖放到meal scene的右上角&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择它的 Attributes inspector,从菜单中选择Add，这个btton就会变成增加按钮&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行虚拟机&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;在meal-scene中添加add按钮&quot;&gt;&lt;a href=&quot;#在meal-scene中添加add按钮&quot; class=&quot;headerlink&quot; title=&quot;在meal scene中添加add按钮&quot;&gt;&lt;/a&gt;在meal scene中添加add按钮&lt;/h5&gt;&lt;p&gt;选择add button(+)，按住control键并拖入meal scene中，出现一个Action Segue菜单，选择show选项&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行app,点击add 按钮，并导航至meal scene&lt;/p&gt;
&lt;h5 id=&quot;改变segue-style&quot;&gt;&lt;a href=&quot;#改变segue-style&quot; class=&quot;headerlink&quot; title=&quot;改变segue style&quot;&gt;&lt;/a&gt;改变segue style&lt;/h5&gt;&lt;p&gt;选择segue，在它的Attributes inspector中选择 Present Modally，在Identifier标签上选择AddItem&lt;/p&gt;
&lt;h5 id=&quot;给meal-scene增加一个navigation-controller&quot;&gt;&lt;a href=&quot;#给meal-scene增加一个navigation-controller&quot; class=&quot;headerlink&quot; title=&quot;给meal scene增加一个navigation controller&quot;&gt;&lt;/a&gt;给meal scene增加一个navigation controller&lt;/h5&gt;&lt;p&gt;选择meal scene，依次点击Editor &amp;gt; Embed In &amp;gt; Navigation Controller.&lt;/p&gt;
&lt;h5 id=&quot;在meal-scene中配置导航栏&quot;&gt;&lt;a href=&quot;#在meal-scene中配置导航栏&quot; class=&quot;headerlink&quot; title=&quot;在meal scene中配置导航栏&quot;&gt;&lt;/a&gt;在meal scene中配置导航栏&lt;/h5&gt;&lt;p&gt;双击navigation bar，输入New Meal保存，从 Object library中拖一个 Bar Button Item放在meal scene的导航栏上，在Attributes inspector中选择 Cancel&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;拖拽另一个Bar Button Item放在meal scene的导航栏上，在Attributes inspector上选择save&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;最后确定自动布局的界面&quot;&gt;&lt;a href=&quot;#最后确定自动布局的界面&quot; class=&quot;headerlink&quot; title=&quot;最后确定自动布局的界面&quot;&gt;&lt;/a&gt;最后确定自动布局的界面&lt;/h3&gt;&lt;h5 id=&quot;更新stack-view的布局&quot;&gt;&lt;a href=&quot;#更新stack-view的布局&quot; class=&quot;headerlink&quot; title=&quot;更新stack view的布局&quot;&gt;&lt;/a&gt;更新stack view的布局&lt;/h5&gt;&lt;p&gt;点击meal scene中的蔚蓝色区域以选择stack view，在canvas的右下角，打开Resolve Auto Layout Issues菜单，选择Update Constraints&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-14.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;在Meal-List中存储新的Meals&quot;&gt;&lt;a href=&quot;#在Meal-List中存储新的Meals&quot; class=&quot;headerlink&quot; title=&quot;在Meal List中存储新的Meals&quot;&gt;&lt;/a&gt;在Meal List中存储新的Meals&lt;/h3&gt;&lt;h5 id=&quot;在MealViewController中增加一个Meal属性&quot;&gt;&lt;a href=&quot;#在MealViewController中增加一个Meal属性&quot; class=&quot;headerlink&quot; title=&quot;在MealViewController中增加一个Meal属性&quot;&gt;&lt;/a&gt;在MealViewController中增加一个Meal属性&lt;/h5&gt;&lt;p&gt;打开MealViewController.swift.在ratingControl下增加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight ocaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;This&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; is either passed by &lt;span class=&quot;type&quot;&gt;`MealTableViewController&lt;/span&gt;` &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; `prepareForSegue(_:sender:)`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; constructed &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; part &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; adding a &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; meal.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var meal: &lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;?&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;建立save按钮与MealViewController代码的连接&quot;&gt;&lt;a href=&quot;#建立save按钮与MealViewController代码的连接&quot; class=&quot;headerlink&quot; title=&quot;建立save按钮与MealViewController代码的连接&quot;&gt;&lt;/a&gt;建立save按钮与MealViewController代码的连接&lt;/h5&gt;&lt;p&gt;打开storyboard，将save 按钮拖至MealViewController.swift代码的ratingControl属性下面，name设置为saveButton&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-15.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-16.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;创建一个松开-Segue&quot;&gt;&lt;a href=&quot;#创建一个松开-Segue&quot; class=&quot;headerlink&quot; title=&quot;创建一个松开 Segue&quot;&gt;&lt;/a&gt;创建一个松开 Segue&lt;/h3&gt;&lt;h5 id=&quot;在MealViewController中实现prepareForSegue-sender-方法&quot;&gt;&lt;a href=&quot;#在MealViewController中实现prepareForSegue-sender-方法&quot; class=&quot;headerlink&quot; title=&quot;在MealViewController中实现prepareForSegue(_:sender:) 方法&quot;&gt;&lt;/a&gt;在MealViewController中实现prepareForSegue(_:sender:) 方法&lt;/h5&gt;&lt;p&gt;打开MealViewController.swift，在// MARK: Actions上面，添加&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Navigation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// This method lets you configure a view controller before it&#39;s presented.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;override func prepareForSegue(&lt;span class=&quot;attribute&quot;&gt;segue&lt;/span&gt;: UIStoryboardSegue, &lt;span class=&quot;attribute&quot;&gt;sender&lt;/span&gt;: AnyObject?) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; saveButton === &lt;span class=&quot;decorator&quot;&gt;sender&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; name = nameTextField.text ?? &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo = photoImageView.image&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; rating = ratingControl.rating&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Set the meal to be passed to MealTableViewController after the unwind segue.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meal = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: name, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: rating)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;给MealTableViewController添加动作方法&quot;&gt;&lt;a href=&quot;#给MealTableViewController添加动作方法&quot; class=&quot;headerlink&quot; title=&quot;给MealTableViewController添加动作方法&quot;&gt;&lt;/a&gt;给MealTableViewController添加动作方法&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift.在最后一个 } 前添加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;unwindToMealList&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sender: UIStoryboardSegue)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sourceViewController = sender.sourceViewController &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? &lt;span class=&quot;type&quot;&gt;MealViewController&lt;/span&gt;, meal = sourceViewController.meal &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Add a new meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; newIndexPath = &lt;span class=&quot;type&quot;&gt;NSIndexPath&lt;/span&gt;(forRow: meals.&lt;span class=&quot;built_in&quot;&gt;count&lt;/span&gt;, inSection: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meals.append(meal)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tableView.insertRowsAtIndexPaths([newIndexPath], withRowAnimation: .&lt;span class=&quot;type&quot;&gt;Bottom&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;将save按钮与unwindToMealList-方法建立连接&quot;&gt;&lt;a href=&quot;#将save按钮与unwindToMealList-方法建立连接&quot; class=&quot;headerlink&quot; title=&quot;将save按钮与unwindToMealList 方法建立连接&quot;&gt;&lt;/a&gt;将save按钮与unwindToMealList 方法建立连接&lt;/h5&gt;&lt;p&gt;打开storyboard，按住control键拖拽Save 按钮到meal scene上面的 Exit 按钮，在出现的菜单中选择unwindToMealList:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-17.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-18.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;当用户没有输入名字时不能存储&quot;&gt;&lt;a href=&quot;#当用户没有输入名字时不能存储&quot; class=&quot;headerlink&quot; title=&quot;当用户没有输入名字时不能存储&quot;&gt;&lt;/a&gt;当用户没有输入名字时不能存储&lt;/h3&gt;&lt;h5 id=&quot;没有名字，不能使用save按钮&quot;&gt;&lt;a href=&quot;#没有名字，不能使用save按钮&quot; class=&quot;headerlink&quot; title=&quot;没有名字，不能使用save按钮&quot;&gt;&lt;/a&gt;没有名字，不能使用save按钮&lt;/h5&gt;&lt;p&gt;在MealViewController.swift中找到&lt;br&gt;&lt;figure class=&quot;highlight 1c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: UITextFieldDelegate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在这个部分添加另一个方法&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;textFieldDidBeginEditing&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(textField: UITextField)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Disable the Save button while editing.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    saveButton.enabled = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在textFieldDidBeginEditing(_:)方法之后添加另一个方法&lt;br&gt;&lt;figure class=&quot;highlight openscad&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func checkValidMealName() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Disable the Save button if the text field is empty.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;text&lt;/span&gt; = nameTextField.&lt;span class=&quot;built_in&quot;&gt;text&lt;/span&gt; ?? &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    saveButton.enabled = !&lt;span class=&quot;built_in&quot;&gt;text&lt;/span&gt;.isEmpty&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;找到textFieldDidEndEditing(_:)方法，向其中添加&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;checkValidMealName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;navigationItem&lt;span class=&quot;selector-class&quot;&gt;.title&lt;/span&gt; = textField.text&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;找到viewDidLoad() 方法，向其中添加&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Enable the Save button only if the text field has a valid Meal name.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;checkValidMealName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;取消新增的meal&quot;&gt;&lt;a href=&quot;#取消新增的meal&quot; class=&quot;headerlink&quot; title=&quot;取消新增的meal&quot;&gt;&lt;/a&gt;取消新增的meal&lt;/h3&gt;&lt;h5 id=&quot;创建并是吸纳一个取消动作方法&quot;&gt;&lt;a href=&quot;#创建并是吸纳一个取消动作方法&quot; class=&quot;headerlink&quot; title=&quot;创建并是吸纳一个取消动作方法&quot;&gt;&lt;/a&gt;创建并是吸纳一个取消动作方法&lt;/h5&gt;&lt;p&gt;选择Cancel button，将其拖入MealViewController.swift代码区域的// MARK: Navigation下面，name 设置为cancel，type设置为UIBarButtonItem.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-19.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-20.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在cancel(_:)中添加&lt;br&gt;&lt;figure class=&quot;highlight lisp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dismissViewControllerAnimated(&lt;span class=&quot;name&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;添加一个向前导航&quot;&gt;&lt;a href=&quot;#添加一个向前导航&quot; class=&quot;headerlink&quot; title=&quot;添加一个向前导航&quot;&gt;&lt;/a&gt;添加一个向前导航&lt;/h3&gt;&lt;p&gt;现在需要添加meal list到meal scene的导航&lt;/p&gt;
&lt;h5 id=&quot;增加一个
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>九. 实现编辑和删除操作</title>
    <link href="http://ios.idup.club/app/9-Implement-edit-and-delete-behavior/"/>
    <id>http://ios.idup.club/app/9-Implement-edit-and-delete-behavior/</id>
    <published>2015-12-01T03:59:42.000Z</published>
    <updated>2016-03-20T05:47:19.792Z</updated>
    
    <content type="html">&lt;h3 id=&quot;允许编辑已经存在的Meals&quot;&gt;&lt;a href=&quot;#允许编辑已经存在的Meals&quot; class=&quot;headerlink&quot; title=&quot;允许编辑已经存在的Meals&quot;&gt;&lt;/a&gt;允许编辑已经存在的Meals&lt;/h3&gt;&lt;h5 id=&quot;配置table-view单元&quot;&gt;&lt;a href=&quot;#配置table-view单元&quot; class=&quot;headerlink&quot; title=&quot;配置table view单元&quot;&gt;&lt;/a&gt;配置table view单元&lt;/h5&gt;&lt;p&gt;打开Main.storyboard，选择table view cell，按住control并把它拖到meal scene中，在出现的Selection Segue中选择show选项&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;向下拖拽在meal list和meal scene之间的navigation controller，到出现新的segue结束&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择最新添加的segue，在它的 Attributes inspector中的Identifier标签中输入ShowDetail&lt;/p&gt;
&lt;h5 id=&quot;确认哪一个segue-在发生&quot;&gt;&lt;a href=&quot;#确认哪一个segue-在发生&quot; class=&quot;headerlink&quot; title=&quot;确认哪一个segue 在发生&quot;&gt;&lt;/a&gt;确认哪一个segue 在发生&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，找到prepareForSegue(_:sender:)方法，并修改为如下&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: - Navigation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// In a storyboard-based application, you will often want to do a little preparation before navigation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;prepareForSegue&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(segue: UIStoryboardSegue, sender: AnyObject?)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; segue.identifier == &lt;span class=&quot;string&quot;&gt;&quot;ShowDetail&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; mealDetailViewController = segue.destinationViewController &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;type&quot;&gt;MealViewController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Get the cell that generated this segue.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedMealCell = sender &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? &lt;span class=&quot;type&quot;&gt;MealTableViewCell&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; indexPath = tableView.indexPathForCell(selectedMealCell)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedMeal = meals[indexPath.row]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mealDetailViewController.meal = selectedMeal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; segue.identifier == &lt;span class=&quot;string&quot;&gt;&quot;AddItem&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Adding new meal.&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;更新viewDidLoad的实现&quot;&gt;&lt;a href=&quot;#更新viewDidLoad的实现&quot; class=&quot;headerlink&quot; title=&quot;更新viewDidLoad的实现&quot;&gt;&lt;/a&gt;更新viewDidLoad的实现&lt;/h5&gt;&lt;p&gt;找到 MealViewController.swift的viewDidLoad()方法，修改内容如下&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewDidLoad() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Handle the text field’s user input via delegate callbacks.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nameTextField&lt;span class=&quot;selector-class&quot;&gt;.delegate&lt;/span&gt; = self&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Set up views if editing an existing Meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; let meal = meal &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        navigationItem&lt;span class=&quot;selector-class&quot;&gt;.title&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nameTextField&lt;span class=&quot;selector-class&quot;&gt;.text&lt;/span&gt;   = meal&lt;span class=&quot;selector-class&quot;&gt;.name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        photoImageView&lt;span class=&quot;selector-class&quot;&gt;.image&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.photo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ratingControl&lt;span class=&quot;selector-class&quot;&gt;.rating&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.rating&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Enable the Save button only if the text field has a valid Meal name.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkValidMealName()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;更新unwindToMealList-方法实现增加和更换meals&quot;&gt;&lt;a href=&quot;#更新unwindToMealList-方法实现增加和更换meals&quot; class=&quot;headerlink&quot; title=&quot;更新unwindToMealList(_:)方法实现增加和更换meals&quot;&gt;&lt;/a&gt;更新unwindToMealList(_:)方法实现增加和更换meals&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift.找到unwindToMealList(_:)方法，修改为如下&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@IBAction func unwindToMealList(&lt;span class=&quot;attribute&quot;&gt;sender&lt;/span&gt;: UIStoryboardSegue) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sourceViewController = sender.sourceViewController &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? MealViewController, meal = &lt;span class=&quot;decorator&quot;&gt;sourceViewController.meal&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedIndexPath = &lt;span class=&quot;decorator&quot;&gt;tableView.indexPathForSelectedRow&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Update an existing meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meals[selectedIndexPath.row] = meal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tableView.reloadRowsAtIndexPaths([selectedIndexPath], &lt;span class=&quot;attribute&quot;&gt;withRowAnimation&lt;/span&gt;: .None)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;decorator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Add a new meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; newIndexPath = NSIndexPath(&lt;span class=&quot;attribute&quot;&gt;forRow&lt;/span&gt;: meals.count, &lt;span class=&quot;attribute&quot;&gt;inSection&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meals.append(meal)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tableView.insertRowsAtIndexPaths([newIndexPath], &lt;span class=&quot;attribute&quot;&gt;withRowAnimation&lt;/span&gt;: .Bottom)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;取消已存在的meal的编辑&quot;&gt;&lt;a href=&quot;#取消已存在的meal的编辑&quot; class=&quot;headerlink&quot; title=&quot;取消已存在的meal的编辑&quot;&gt;&lt;/a&gt;取消已存在的meal的编辑&lt;/h3&gt;&lt;h5 id=&quot;改变cancel动作的实现&quot;&gt;&lt;a href=&quot;#改变cancel动作的实现&quot; class=&quot;headerlink&quot; title=&quot;改变cancel动作的实现&quot;&gt;&lt;/a&gt;改变cancel动作的实现&lt;/h5&gt;&lt;p&gt;打开MealViewController.swift，找到cancel(_:)方法，修改为如下&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;cancel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sender: UIBarButtonItem)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Depending on style of presentation (modal or push presentation), this view controller needs to be dismissed in two different ways.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; isPresentingInAddMealMode = presentingViewController &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;UINavigationController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; isPresentingInAddMealMode &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dismissViewControllerAnimated(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        navigationController!.popViewControllerAnimated(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;支持meals-删除&quot;&gt;&lt;a href=&quot;#支持meals-删除&quot; class=&quot;headerlink&quot; title=&quot;支持meals 删除&quot;&gt;&lt;/a&gt;支持meals 删除&lt;/h3&gt;&lt;h5 id=&quot;在table-view中增加编辑按钮&quot;&gt;&lt;a href=&quot;#在table-view中增加编辑按钮&quot; class=&quot;headerlink&quot; title=&quot;在table view中增加编辑按钮&quot;&gt;&lt;/a&gt;在table view中增加编辑按钮&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，找到viewDidLoad() 方法，修改为如下&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Use the edit button item provided by the table view controller.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    navigationItem.leftBarButtonItem = editButtonItem()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Load the sample data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    loadSampleMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;删除一个meal&quot;&gt;&lt;a href=&quot;#删除一个meal&quot; class=&quot;headerlink&quot; title=&quot;删除一个meal&quot;&gt;&lt;/a&gt;删除一个meal&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，找到tableView(_:commitEditingStyle:forRowAtIndexPath:)方法，修改为&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Override to support editing the table view.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(tableView: UITableView, commitEditingStyle editingStyle: UITableViewCellEditingStyle, forRowAtIndexPath indexPath: NSIndexPath)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; editingStyle == .&lt;span class=&quot;type&quot;&gt;Delete&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Delete the row from the data source&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meals.removeAtIndex(indexPath.row)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tableView.deleteRowsAtIndexPaths([indexPath], withRowAnimation: .&lt;span class=&quot;type&quot;&gt;Fade&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; editingStyle == .&lt;span class=&quot;type&quot;&gt;Insert&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;允许编辑已经存在的Meals&quot;&gt;&lt;a href=&quot;#允许编辑已经存在的Meals&quot; class=&quot;headerlink&quot; title=&quot;允许编辑已经存在的Meals&quot;&gt;&lt;/a&gt;允许编辑已经存在的Meals&lt;/h3&gt;&lt;h5 id=&quot;配置table-view单元&quot;&gt;&lt;
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>十. 持久化数据</title>
    <link href="http://ios.idup.club/app/10-Persist-data/"/>
    <id>http://ios.idup.club/app/10-Persist-data/</id>
    <published>2015-11-30T04:00:00.000Z</published>
    <updated>2016-03-20T05:47:25.728Z</updated>
    
    <content type="html">&lt;h3 id=&quot;保存并加载Meal&quot;&gt;&lt;a href=&quot;#保存并加载Meal&quot; class=&quot;headerlink&quot; title=&quot;保存并加载Meal&quot;&gt;&lt;/a&gt;保存并加载Meal&lt;/h3&gt;&lt;h5 id=&quot;实现代码键结构&quot;&gt;&lt;a href=&quot;#实现代码键结构&quot; class=&quot;headerlink&quot; title=&quot;实现代码键结构&quot;&gt;&lt;/a&gt;实现代码键结构&lt;/h5&gt;&lt;p&gt;打开 Meal.swift，在// MARK: Properties下面增加如下结构&lt;br&gt;&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Types&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PropertyKey&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; nameKey = &lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photoKey = &lt;span class=&quot;string&quot;&gt;&quot;photo&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; ratingKey = &lt;span class=&quot;string&quot;&gt;&quot;rating&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在 Meal.swift中找到Meal class行,修改为&lt;br&gt;&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Meal&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;NSObject&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;NSCoding &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;实现encodeWithCoder方法&quot;&gt;&lt;a href=&quot;#实现encodeWithCoder方法&quot; class=&quot;headerlink&quot; title=&quot;实现encodeWithCoder方法&quot;&gt;&lt;/a&gt;实现encodeWithCoder方法&lt;/h5&gt;&lt;p&gt;打开Meal.swift，在代码最后一个 { 前面增加如下代码&lt;br&gt;&lt;figure class=&quot;highlight roboconf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func encodeWithCoder(aCoder: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;aCoder.encodeObject(name, forKey&lt;/span&gt;: PropertyKey&lt;span class=&quot;variable&quot;&gt;.nameKey&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    aCoder&lt;span class=&quot;variable&quot;&gt;.encodeObject&lt;/span&gt;(photo, forKey: PropertyKey&lt;span class=&quot;variable&quot;&gt;.photoKey&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    aCoder&lt;span class=&quot;variable&quot;&gt;.encodeInteger&lt;/span&gt;(rating, forKey: PropertyKey&lt;span class=&quot;variable&quot;&gt;.ratingKey&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;初始化加载meal&quot;&gt;&lt;a href=&quot;#初始化加载meal&quot; class=&quot;headerlink&quot; title=&quot;初始化加载meal&quot;&gt;&lt;/a&gt;初始化加载meal&lt;/h5&gt;&lt;p&gt;在encodeWithCoder(_:)方法前，增加代码&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required convenience init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; name = aDecoder.decodeObjectForKey(PropertyKey.nameKey) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Because photo is an optional property of Meal, use conditional cast.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo = aDecoder.decodeObjectForKey(PropertyKey.photoKey) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? UIImage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; rating = aDecoder.decodeIntegerForKey(PropertyKey.ratingKey)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Must call designated initializer.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.init(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: name, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: rating)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;更新初始化实现来调用父类的初始化&quot;&gt;&lt;a href=&quot;#更新初始化实现来调用父类的初始化&quot; class=&quot;headerlink&quot; title=&quot;更新初始化实现来调用父类的初始化&quot;&gt;&lt;/a&gt;更新初始化实现来调用父类的初始化&lt;/h5&gt;&lt;p&gt;找到initializer并修改为如下&lt;br&gt;&lt;figure class=&quot;highlight sqf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;init?(&lt;span class=&quot;built_in&quot;&gt;name&lt;/span&gt;: String, photo: UIImage?, &lt;span class=&quot;built_in&quot;&gt;rating&lt;/span&gt;: Int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Initialize stored properties.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.&lt;span class=&quot;built_in&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.photo = photo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.&lt;span class=&quot;built_in&quot;&gt;rating&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;rating&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super.init()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Initialization should fail if there is no name or if the rating is negative.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;name&lt;/span&gt;.isEmpty || &lt;span class=&quot;built_in&quot;&gt;rating&lt;/span&gt; &amp;lt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;创建数据的文件路径&quot;&gt;&lt;a href=&quot;#创建数据的文件路径&quot; class=&quot;headerlink&quot; title=&quot;创建数据的文件路径&quot;&gt;&lt;/a&gt;创建数据的文件路径&lt;/h5&gt;&lt;p&gt;在 Meal.swift中，在 // MARK: Properties部分下面，增加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight cs&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Archiving Paths&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; DocumentsDirectory = NSFileManager().URLsForDirectory(.DocumentDirectory, inDomains: .UserDomainMask).first!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; ArchiveURL = DocumentsDirectory.URLByAppendingPathComponent(&lt;span class=&quot;string&quot;&gt;&quot;meals&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;保存并加载meal列表&quot;&gt;&lt;a href=&quot;#保存并加载meal列表&quot; class=&quot;headerlink&quot; title=&quot;保存并加载meal列表&quot;&gt;&lt;/a&gt;保存并加载meal列表&lt;/h3&gt;&lt;h5 id=&quot;实现保存meal-list的方法&quot;&gt;&lt;a href=&quot;#实现保存meal-list的方法&quot; class=&quot;headerlink&quot; title=&quot;实现保存meal list的方法&quot;&gt;&lt;/a&gt;实现保存meal list的方法&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，在最后一个 } 前增加如下代码&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;saveMeals&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; isSuccessfulSave = &lt;span class=&quot;type&quot;&gt;NSKeyedArchiver&lt;/span&gt;.archiveRootObject(meals, toFile: &lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;ArchiveURL&lt;/span&gt;.path!)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; !isSuccessfulSave &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Failed to save meals...&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;实现加载meal-list的方法&quot;&gt;&lt;a href=&quot;#实现加载meal-list的方法&quot; class=&quot;headerlink&quot; title=&quot;实现加载meal list的方法&quot;&gt;&lt;/a&gt;实现加载meal list的方法&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，在最后一个 } 前增加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;loadMeals&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; [&lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;]? &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;NSKeyedUnarchiver&lt;/span&gt;.unarchiveObjectWithFile(&lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;ArchiveURL&lt;/span&gt;.path!) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? [&lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;保存列表当用户增加。移除或者编辑meal时&quot;&gt;&lt;a href=&quot;#保存列表当用户增加。移除或者编辑meal时&quot; class=&quot;headerlink&quot; title=&quot;保存列表当用户增加。移除或者编辑meal时&quot;&gt;&lt;/a&gt;保存列表当用户增加。移除或者编辑meal时&lt;/h5&gt;&lt;p&gt;在MealTableViewController.swift中，找打unwindToMealList(_:)方法， 修改为&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@IBAction func unwindToMealList(&lt;span class=&quot;attribute&quot;&gt;sender&lt;/span&gt;: UIStoryboardSegue) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sourceViewController = sender.sourceViewController &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? MealViewController, meal = &lt;span class=&quot;decorator&quot;&gt;sourceViewController.meal&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedIndexPath = &lt;span class=&quot;decorator&quot;&gt;tableView.indexPathForSelectedRow&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Update an existing meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meals[selectedIndexPath.row] = meal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tableView.reloadRowsAtIndexPaths([selectedIndexPath], &lt;span class=&quot;attribute&quot;&gt;withRowAnimation&lt;/span&gt;: .None)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;decorator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Add a new meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; newIndexPath = NSIndexPath(&lt;span class=&quot;attribute&quot;&gt;forRow&lt;/span&gt;: meals.count, &lt;span class=&quot;attribute&quot;&gt;inSection&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meals.append(meal)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tableView.insertRowsAtIndexPaths([newIndexPath], &lt;span class=&quot;attribute&quot;&gt;withRowAnimation&lt;/span&gt;: .Bottom)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Save the meals.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        saveMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;找到tableView(_:commitEditingStyle:forRowAtIndexPath:) 方法，修改为&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Override to support editing the table view.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(tableView: UITableView, commitEditingStyle editingStyle: UITableViewCellEditingStyle, forRowAtIndexPath indexPath: NSIndexPath)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; editingStyle == .&lt;span class=&quot;type&quot;&gt;Delete&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Delete the row from the data source&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meals.removeAtIndex(indexPath.row)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        saveMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tableView.deleteRowsAtIndexPaths([indexPath], withRowAnimation: .&lt;span class=&quot;type&quot;&gt;Fade&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; editingStyle == .&lt;span class=&quot;type&quot;&gt;Insert&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;在合适时间加载-meal-list&quot;&gt;&lt;a href=&quot;#在合适时间加载-meal-list&quot; class=&quot;headerlink&quot; title=&quot;在合适时间加载 meal list&quot;&gt;&lt;/a&gt;在合适时间加载 meal list&lt;/h5&gt;&lt;p&gt;在MealTableViewController.swift中，找到viewDidLoad() 方法，修改为如下&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Use the edit button item provided by the table view controller.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    navigationItem.leftBarButtonItem = editButtonItem()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Load any saved meals, otherwise load sample data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; savedMeals = loadMeals() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meals += savedMeals&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Load the sample data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        loadSampleMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;保存并加载Meal&quot;&gt;&lt;a href=&quot;#保存并加载Meal&quot; class=&quot;headerlink&quot; title=&quot;保存并加载Meal&quot;&gt;&lt;/a&gt;保存并加载Meal&lt;/h3&gt;&lt;h5 id=&quot;实现代码键结构&quot;&gt;&lt;a href=&quot;#实现代码键结构&quot; class=&quot;he
    
    </summary>
    
      <category term="iOS应用示例" scheme="http://ios.idup.club/categories/iOS%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>iOS技术概述</title>
    <link href="http://ios.idup.club/basic/iOS-Overview/"/>
    <id>http://ios.idup.club/basic/iOS-Overview/</id>
    <published>2015-11-01T07:00:52.000Z</published>
    <updated>2016-03-20T05:49:57.257Z</updated>
    
    <content type="html">&lt;p&gt;iOS是一个苹果公司开发的运行于iPhone、iPad和iPod Touch等移动设备上的操作系统.当前最新版本是iOS 9.&lt;/p&gt;
&lt;p&gt;iOS操作系统管理iOS设备硬件资源，并提供以SDK形式实现各类iOS应用软件的技术。&lt;/p&gt;
&lt;h3 id=&quot;iOS-SDK&quot;&gt;&lt;a href=&quot;#iOS-SDK&quot; class=&quot;headerlink&quot; title=&quot;iOS SDK&quot;&gt;&lt;/a&gt;iOS SDK&lt;/h3&gt;&lt;p&gt;iOS SDK包含开发、安装、运行和测试iOS操作系统之上的应用软件所需的工具和接口，其中&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;框架（Frameworks）:  动态共享的程序库和资源&lt;/li&gt;
&lt;li&gt;工具: Xcode集成开发环境、 模拟器和开发文档等&lt;/li&gt;
&lt;li&gt;其他&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;iOS的分层架构&quot;&gt;&lt;a href=&quot;#iOS的分层架构&quot; class=&quot;headerlink&quot; title=&quot;iOS的分层架构&quot;&gt;&lt;/a&gt;iOS的分层架构&lt;/h3&gt;&lt;p&gt;iOS 作为iOS应用软件（App）和硬件设备间的中间层提供了一组定义良好的系统接口以便你所开发的App可以方便与设备通讯交互.这些系统接口被以框架（Frameworks）的形式交付提供给开发者使用。一个框架是一个包含了一组动态共享的程序库和相应资源(例如头文件、图片、帮助应用等) 的目录&lt;/p&gt;
&lt;p&gt;iOS操作系统提供的框架分为4层。&lt;/p&gt;
&lt;img src=&quot;/images/SystemLayers.png&quot; width=&quot;500&quot; title=&quot;iOS分层结构&quot;&gt;
&lt;h4 id=&quot;Cocoa-Touch层&quot;&gt;&lt;a href=&quot;#Cocoa-Touch层&quot; class=&quot;headerlink&quot; title=&quot;Cocoa Touch层&quot;&gt;&lt;/a&gt;Cocoa Touch层&lt;/h4&gt;&lt;p&gt;Cocoa Touch层包含构造iOS应用的核心框架。&lt;/p&gt;
&lt;p&gt;其中UIKit 框架(UIKit.framework) 提供了开发图形化事件驱动iOS App的基础设施，包括&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基本应用管理&lt;/li&gt;
&lt;li&gt;用户界面管理&lt;/li&gt;
&lt;li&gt;视图控制器和视图&lt;/li&gt;
&lt;li&gt;触摸和运动事件&lt;/li&gt;
&lt;li&gt;文档模型和iCloud集成支持&lt;/li&gt;
&lt;li&gt;多任务、打印、通知等机制&lt;/li&gt;
&lt;li&gt;动画效果、内容分享等&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;Media-层&quot;&gt;&lt;a href=&quot;#Media-层&quot; class=&quot;headerlink&quot; title=&quot;Media 层&quot;&gt;&lt;/a&gt;Media 层&lt;/h4&gt;&lt;p&gt;Media层包含了绘图、音频、视频处理技术的实现，用以实现iOS应用中的多媒体体验。包括&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Assets Library Framework&lt;/li&gt;
&lt;li&gt;AV Foundation Framework&lt;/li&gt;
&lt;li&gt;Core Audio&lt;/li&gt;
&lt;li&gt;Core Graphics Framework&lt;/li&gt;
&lt;li&gt;Core Image Framework&lt;/li&gt;
&lt;li&gt;Core Text Framework&lt;/li&gt;
&lt;li&gt;Core Video Framework&lt;/li&gt;
&lt;li&gt;Image I/O Framework&lt;/li&gt;
&lt;li&gt;Media Player Framework&lt;/li&gt;
&lt;li&gt;OpenAL Framework&lt;/li&gt;
&lt;li&gt;OpenGL ES Framework&lt;/li&gt;
&lt;li&gt;Quartz Core Framework&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;Core-Service层&quot;&gt;&lt;a href=&quot;#Core-Service层&quot; class=&quot;headerlink&quot; title=&quot;Core Service层&quot;&gt;&lt;/a&gt;Core Service层&lt;/h4&gt;&lt;p&gt;Core Service 包括所有App都使用的基础系统服务。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Accounts Framework&lt;/li&gt;
&lt;li&gt;Address Book Framework&lt;/li&gt;
&lt;li&gt;Core Data Framework&lt;/li&gt;
&lt;li&gt;Core Foundation Framework&lt;/li&gt;
&lt;li&gt;Core Location Framework&lt;/li&gt;
&lt;li&gt;Core Media Framework&lt;/li&gt;
&lt;li&gt;Core Telephony Framework&lt;/li&gt;
&lt;li&gt;Event Kit Framework&lt;/li&gt;
&lt;li&gt;Foundation Framework&lt;/li&gt;
&lt;li&gt;Mobile Core Services Framework&lt;/li&gt;
&lt;li&gt;Newsstand Kit Framework&lt;/li&gt;
&lt;li&gt;Quick Look Framework&lt;/li&gt;
&lt;li&gt;Store Kit Framework&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中 Foundation framework (Foundation.framework) 提供了 Core Foundation框架中大部分功能特性的（Swift）封装&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Collection data types (arrays, sets, and so on)&lt;/li&gt;
&lt;li&gt;Bundles&lt;/li&gt;
&lt;li&gt;String management&lt;/li&gt;
&lt;li&gt;Date and time management&lt;/li&gt;
&lt;li&gt;Raw data block management&lt;/li&gt;
&lt;li&gt;Preferences management&lt;/li&gt;
&lt;li&gt;URL and stream manipulation&lt;/li&gt;
&lt;li&gt;Threads and run loops&lt;/li&gt;
&lt;li&gt;Regular expression matching&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;Core-OS层&quot;&gt;&lt;a href=&quot;#Core-OS层&quot; class=&quot;headerlink&quot; title=&quot;Core OS层&quot;&gt;&lt;/a&gt;Core OS层&lt;/h4&gt;&lt;p&gt;以上其他各项技术（框架）的实现基础，包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Accelerate Framework&lt;/li&gt;
&lt;li&gt;Core Bluetooth&lt;/li&gt;
&lt;li&gt;External Accessory Framework&lt;/li&gt;
&lt;li&gt;Security Framework&lt;/li&gt;
&lt;li&gt;System&lt;br&gt;&lt;strong&gt; Threading
&lt;/strong&gt; Networking&lt;br&gt;&lt;strong&gt; File-system access
&lt;/strong&gt; Standard I/O&lt;br&gt;&lt;strong&gt; Bonjour and DNS services
&lt;/strong&gt; Locale information&lt;br&gt;&lt;strong&gt; Memory allocation
&lt;/strong&gt; Math computations&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;iOS是一个苹果公司开发的运行于iPhone、iPad和iPod Touch等移动设备上的操作系统.当前最新版本是iOS 9.&lt;/p&gt;
&lt;p&gt;iOS操作系统管理iOS设备硬件资源，并提供以SDK形式实现各类iOS应用软件的技术。&lt;/p&gt;
&lt;h3 id=&quot;iOS-SDK&quot;&gt;&lt;
    
    </summary>
    
      <category term="iOS基础" scheme="http://ios.idup.club/categories/iOS%E5%9F%BA%E7%A1%80/"/>
    
    
  </entry>
  
  <entry>
    <title>Xcode 精髓</title>
    <link href="http://ios.idup.club/xcode/Xcode%E6%A6%82%E8%A7%88-Essential/"/>
    <id>http://ios.idup.club/xcode/Xcode概览-Essential/</id>
    <published>2015-10-07T10:10:47.000Z</published>
    <updated>2016-03-07T15:02:43.636Z</updated>
    
    <content type="html">&lt;p&gt;Xcode 概述&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Xcode-精髓（Xcode-Essentials&quot;&gt;&lt;a href=&quot;#Xcode-精髓（Xcode-Essentials&quot; class=&quot;headerlink&quot; title=&quot;Xcode 精髓（Xcode Essentials)&quot;&gt;&lt;/a&gt;Xcode 精髓（&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1]&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Xcode Essentials&lt;/a&gt;)&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&quot;概览-At-a-Glance&quot;&gt;&lt;a href=&quot;#概览-At-a-Glance&quot; class=&quot;headerlink&quot; title=&quot;概览 (At a Glance)&quot;&gt;&lt;/a&gt;概览 &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;(At a Glance)&lt;/a&gt;&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Xcode&lt;/a&gt;&lt;br&gt;是苹果的集成开发环境(IDE),开发者可用于开发适用于苹果iPad、iPhone、iWatch以及Mac设备上的应用程序。在应用程序的创建、测试、优化以及提交至App Store的过程中，Xcode为开发者提供了用于管理整个开发工作流的工具。&lt;/p&gt;
&lt;h3 id=&quot;单窗口界面（Single-Window-interface）&quot;&gt;&lt;a href=&quot;#单窗口界面（Single-Window-interface）&quot; class=&quot;headerlink&quot; title=&quot;单窗口界面（Single-Window interface）&quot;&gt;&lt;/a&gt;单窗口界面（&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Single-Window interface&lt;/a&gt;）&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;Xcode界面在单工作区窗口集成了代码编辑、用户界面（UI）设计、资产管理、测试以及调试等版块，这些窗口会根据开发者的工作重新配置内容。比如在某个区域选中一个文件，相应的编辑器会在另一个区域被打开。选中一个符号或者UI对象，那么其文档将会出现在紧邻的面板中。&lt;/p&gt;
&lt;p&gt;您可以仅展示所需内容来专注于某项任务，比如仅展示源码或UI布局，或者你可以同时进行编码和UI布局。你可以打开多个窗口或者在每个窗口上打开多个Tab来进一步自定义环境。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode1.png&quot; alt=&quot;1.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;辅助代码编辑-Assisted-Source-Code-Editing&quot;&gt;&lt;a href=&quot;#辅助代码编辑-Assisted-Source-Code-Editing&quot; class=&quot;headerlink&quot; title=&quot;辅助代码编辑 Assisted Source Code Editing&quot;&gt;&lt;/a&gt;辅助代码编辑 &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Assisted Source Code Editing&lt;/a&gt;&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;无论您使用Objective-C, Swift, C, C++，或者是混合使用这些语言，Xcode都会在输入时即时进行检测。当Xcode发现到一个错误时，源码编辑器会对错误进行高亮显示，并提供修复。Xcode可通过智能补全功能来加快您的输入，可使用现成的代码片段或者源文件模板来进一步减少你的输入。在Swift中，Playgrounds可让你无需构建和运行应用程序即可进行交互式的编码体验。&lt;/p&gt;
&lt;p&gt;您可以简单地配置源码编辑器来展示同一文件的多个视图，或者一次查看多个相关文件。搜索、替代和重构操作可帮您快速安全地对代码进行大量修改。通过各种各样的功能，Xcode让您编写高质量代码变得前所未有的简单。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode2.png&quot; alt=&quot;2&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;图形用户界面设计-Graphical-UI-Design&quot;&gt;&lt;a href=&quot;#图形用户界面设计-Graphical-UI-Design&quot; class=&quot;headerlink&quot; title=&quot;图形用户界面设计 Graphical UI Design&quot;&gt;&lt;/a&gt;图形用户界面设计 &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Graphical UI Design&lt;/a&gt;&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;Interface Builder（IB） 是一款集成在Xcode中的可视化设计编辑器。开发者可使用IB组合窗口、界面、控件、菜单以及其他元素（可配置对象库或者或你创建的库中的元素），从而构建iOS或者Mac app的用户界面。开发者可使用Storyboards来指定应用程序的flow，以及界面间的过渡，然后根据执行代码图形化地连接对象和过渡。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode3.png&quot; alt=&quot;3.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;使用Xcode的Auto Layout特性为项目定义约束，以便其能根据屏幕尺寸、窗口尺寸以及本地化自动调整。使用Size Classes为任何屏幕尺寸组合和方向调整您的移动UI：自定义Auto Layout约束，添加或者移除是视图，甚至是改变字体。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode4.png&quot; alt=&quot;4.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;Xcode中的资产目录可帮您管理在app中使用的图片文件和数据文件。图片文件比如icon、自定义美术作品以及启动图片等。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode5.png&quot; alt=&quot;5.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;通过Xcode的粒子发射器，您可以通过添加动画效果来提高iOS或Mac游戏的水平，比如雪花、火花以及烟雾。对于Mac 应用程序来说，SceneKit编辑器可帮您使用3D创作工具创建的场景，并将其作为数字资产交换（DAE）文件输出。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode6.png&quot; alt=&quot;6.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;集成调试-Integrated-Debugging&quot;&gt;&lt;a href=&quot;#集成调试-Integrated-Debugging&quot; class=&quot;headerlink&quot; title=&quot;集成调试 Integrated Debugging&quot;&gt;&lt;/a&gt;集成调试 &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Integrated Debugging&lt;/a&gt;&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;当Xcode在调试模式中启动应用程序时，它会立即开启调试会话。如果您运行的是一款iOS 或者watchOs app，那么Xcode将在iOS模拟器或者连接至Mac的设备上启用它。如果您运行的是一款Mac app，那么Xcode将直接在您的Mac上打开它。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode7.png&quot; alt=&quot;7.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;您可以直接在源码编辑器中调试应用程序。通过在变量名称上移动鼠标来查看对象的内容，然后使用Quick Look来检测某个特殊值。调试区和调试导航器可让您在检查代码的时候谨慎地控制应用程序的执行。对于更加精细的控制，控制台会提供命令行来访问调试器。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode8.png&quot; alt=&quot;8.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;调试仪表板会展示应用程序的资源消耗情况，以帮您在用户发现问题之前确定其所在。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode9.png&quot; alt=&quot;9.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;测试和持续集成-Testing-and-Continuous-Integrations&quot;&gt;&lt;a href=&quot;#测试和持续集成-Testing-and-Continuous-Integrations&quot; class=&quot;headerlink&quot; title=&quot;测试和持续集成 Testing and Continuous Integrations&quot;&gt;&lt;/a&gt;测试和持续集成 &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Testing and Continuous Integrations&lt;/a&gt;&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;为了帮您开发一款高质量的应用程序，Xcode包含了可用于功能、性能和用户界面测试的测试框架。您可以编写测试用例并使用测试导航器来运行测试并查看测试结果。你可以进行单元测试来查看当前代码片段。性能测试可确保app的重要部分不会让用户等待。为定期运行测试设置触发器，以便您能捕捉代码和性能中的回归缺陷（regression bugs）。&lt;/p&gt;
&lt;p&gt;在测试导航器中中运行您的测试，查看测试结果，并作任何所需的更改来通过测试。您可以使用Xcode service来自动执行测试。你可以创建运行在单独服务器上 bots 来定期执行单元测试，或者是每次提交源码时执行任务。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode10.png&quot; alt=&quot;10.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;除了运行单元测试外，bots会基于代码自动执行静态分析，构建您的应用程序，并归档项目用于分发给测试者或者提交至App Store。虽然可执行app的这些持续集成，但是bots也会报告编译错误、警告、静态分析器问题以及失败的单元测试。&lt;/p&gt;
&lt;h3 id=&quot;自动保存、工程快照以及源码控制管理-Automatic-Saves-and-Source-Control-Management&quot;&gt;&lt;a href=&quot;#自动保存、工程快照以及源码控制管理-Automatic-Saves-and-Source-Control-Management&quot; class=&quot;headerlink&quot; title=&quot;自动保存、工程快照以及源码控制管理 Automatic Saves and Source Control Management&quot;&gt;&lt;/a&gt;自动保存、工程快照以及源码控制管理 &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Automatic Saves and Source Control Management&lt;/a&gt;&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;工作过程中，Xcode会自动保存您对源码和项目文件所做的更改。该功能无需配置，因为Xcode会持续跟踪您的更改并保存它们，您可以通过Undo和Revert Document命令将文件恢复至先前的状态。&lt;/p&gt;
&lt;p&gt;想要更精确地跟踪所做的变化，可使用Xcode的源码控制功能。Xcode支持两种流行的源码控制系统：Git和Subversion。您可以访问远程Git和Subversion源码仓库，并创建本地Git仓库。通过适用于OS X Server 的Xcode service，您可以将Git仓库托管在自己的服务器上。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/xcode11.png&quot; alt=&quot;11.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;完善的文档-Integrated-Documentation&quot;&gt;&lt;a href=&quot;#完善的文档-Integrated-Documentation&quot; class=&quot;headerlink&quot; title=&quot;完善的文档 Integrated Documentation&quot;&gt;&lt;/a&gt;完善的文档 &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Integrated Documentation&lt;/a&gt;&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;当您编码时，Xcode可为您提供详细的技术信息。根据需要，Quick Help可在视图内为您提供简明的API信息。通过一步步指示来执行常规的Xcode任务，你会发现Xcode帮助信息俯拾皆是。&lt;/p&gt;
&lt;p&gt;Xcode包含大量使用方面的文档，并且提供了全面的SDK文档，包括编程指南、教程、示例代码、详细的框架API参考以及苹果工程师的演示视频。所有这些资源可在Xcode文档查看器中找到，并且可通过后台自动下载来更新文档。&lt;/p&gt;
&lt;h3 id=&quot;将应用程序分发给测试者或者提交App商店-App-Distribution-to-Testers-and-App-Store&quot;&gt;&lt;a href=&quot;#将应用程序分发给测试者或者提交App商店-App-Distribution-to-Testers-and-App-Store&quot; class=&quot;headerlink&quot; title=&quot;将应用程序分发给测试者或者提交App商店 App Distribution to Testers and App Store&quot;&gt;&lt;/a&gt;将应用程序分发给测试者或者提交App商店 &lt;a href=&quot;https://developer.apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/index.html#//apple_ref/doc/uid/TP40010215-CH24-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;App Distribution to Testers and App Store&lt;/a&gt;&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;您的大部分开发时间都花在编码任务上，但是针对App Store进行开发，您需要在app的生命周期内执行一系列的管理任务。除了Xcode，您还需要使用Member Center 来管理开发者计划账户和权益，您也将会使用iTunes Connect 检查合同的状态、设置税金和银行信息，获得营收和财务报告，并管理app的元数据。&lt;/p&gt;
&lt;p&gt;Xcode项目配置有助于将您的应用程序分发给测试者和提交至App Store。提交至App Store是一个多步过程，从您签署 iTunes Connect和提供必要的产品信息开始。在Xcode中，您需要创建项目的档案并提交至商店。当应用程序通过审核后，您可以使用iTunes Connect设置发布日期。（如果您在商店之外分发Mac app，您需要遵守一个略有不同的进程步骤）&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Xcode 概述&lt;br&gt;
    
    </summary>
    
      <category term="xcode概述" scheme="http://ios.idup.club/categories/xcode%E6%A6%82%E8%BF%B0/"/>
    
    
  </entry>
  
</feed>
